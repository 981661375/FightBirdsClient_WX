var g = require('globalData.js');
require=function i(s,a,c){function l(n,t){if(!a[n]){if(!s[n]){var e="function"==typeof require&&require;if(!t&&e)return e(n,!0);if(h)return h(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var r=a[n]={exports:{}};s[n][0].call(r.exports,function(t){var e=s[n][1][t];return l(e||t)},r,r.exports,i,s,a,c)}return a[n].exports}for(var h="function"==typeof require&&require,t=0;t<c.length;t++)l(c[t]);return l}({AIBulletController:[function(t,e,n){"use strict";cc._RF.push(e,"0d89fcUZF1IM4vjxLGqPiu9","AIBulletController");var o=t("globalData");cc.Class({extends:cc.Component,properties:{bullet:{default:null,type:cc.Node},leftAnchor:{default:null,type:cc.Node},rightAnchor:{default:null,type:cc.Node},bulletParticle:{default:null,type:cc.Node},fireAudioSource:{type:cc.AudioSource,default:null},graphics:{type:cc.Node,default:null}},onLoad:function(){var e=this;console.log("this.bullet =="+this.bullet),console.log(" rightAnchor =="+this.rightAnchor),this.drawGraphics=this.graphics.getComponent(cc.Graphics),this.leftAnchorPosition=this.leftAnchor.getPosition(),this.rightAnchorPosition=this.rightAnchor.getPosition(),this.originalMiddlePosition=this.leftAnchorPosition.add(this.rightAnchorPosition).mulSelf(.5),o.socket.on("move",function(t){console.log("this.bullet =="+e.bullet),console.log(" rightAnchor =="+e.rightAnchor),e.bullet.setPosition(t.data),"bulletmove"===t.type&t.data.y<=e.originalMiddlePosition.y?e.drawLine():"bulletfly"===t.type&t.data.y<=e.originalMiddlePosition.y?e.drawLine():(e.drawGraphics.clear(!0),e.drawGraphics.moveTo(e.rightAnchorPosition.x,e.rightAnchorPosition.y),e.drawGraphics.lineTo(e.leftAnchorPosition.x,e.leftAnchorPosition.y),e.drawGraphics.stroke())}),o.socket.on("Particleactive",function(t){"bulletParticleactive"===t.type&&(e.fireAudioSource.play(),e.bulletParticle.getComponent(cc.ParticleSystem).resetSystem(),e.bulletParticle.active=!0)}),o.socket.on("fireResult",function(t){console.log("catchBird"),"catchBird"===t.type?(e.bulletParticle.getComponent(cc.ParticleSystem).resetSystem(),e.bulletParticle.active=!1):"outBound"===t.type&&(e.bulletParticle.getComponent(cc.ParticleSystem).resetSystem(),e.bulletParticle.active=!1)})},drawLine:function(){this.drawGraphics.clear(!0),this.drawGraphics.moveTo(this.bullet.getPosition().x,this.bullet.getPosition().y),this.drawGraphics.lineTo(this.leftAnchorPosition.x,this.leftAnchorPosition.y),this.drawGraphics.moveTo(this.bullet.getPosition().x,this.bullet.getPosition().y),this.drawGraphics.lineTo(this.rightAnchorPosition.x,this.rightAnchorPosition.y),this.drawGraphics.stroke()},drawCurve:function(){this.drawGraphics.clear(!0),this.drawGraphics.moveTo(this.leftAnchorPosition.x,this.leftAnchorPosition.y),this.drawGraphics.quadraticCurveTo(this.bullet.getPosition().x,this.bullet.getPosition().y,this.rightAnchorPosition.x,this.rightAnchorPosition.y),this.drawGraphics.stroke()},start:function(){}}),cc._RF.pop()},{globalData:"globalData"}],

  StartLevelJS: [function (t, e, n) {
    "use strict"; cc._RF.push(e, "a2591QfkyVJoJJOWs2csU8U", "StartLevelJS"); var o = t("globalData"); cc.Class({
      extends: cc.Component, properties: { roomIDLabel: { default: [], type: cc.Node } }, onLoad: function () { this.count = 1 }, KeyBordButton: function (t, e) { if ("cancel" !== e) switch (this.count < 1 && (this.count = 1), this.count) { case 1: this.roomIDLabel[0].getComponent(cc.Label).string = e, o.roomID = o.roomID + e, this.count++; break; case 2: this.roomIDLabel[1].getComponent(cc.Label).string = e, o.roomID = o.roomID + e, this.count++; break; case 3: this.roomIDLabel[2].getComponent(cc.Label).string = e, o.roomID = o.roomID + e, this.count++; break; case 4: this.roomIDLabel[3].getComponent(cc.Label).string = e, o.roomID = o.roomID + e, this.count++ } else switch (this.count) { case 1: this.roomIDLabel[0].getComponent(cc.Label).string = "", o.roomID = ""; case 2: this.roomIDLabel[0].getComponent(cc.Label).string = "", o.roomID = o.roomID.substring(0, o.roomID.length - 1), this.count--; break; case 3: this.roomIDLabel[1].getComponent(cc.Label).string = "", o.roomID = o.roomID.substring(0, o.roomID.length - 1), this.count--; break; case 4: this.roomIDLabel[2].getComponent(cc.Label).string = "", o.roomID = o.roomID.substring(0, o.roomID.length - 1), this.count--; break; case 5: this.roomIDLabel[3].getComponent(cc.Label).string = "", o.roomID = o.roomID.substring(0, o.roomID.length - 1), this.count-- } }, RoomButton: function (t, e) {
      4 === o.roomID.length && ("joinRoom" === e ? (o.seat = "right", o.sendToServer("room", "joinRoom", o.roomID)) : "createRoom" === e && (o.seat = "left", o.sendToServer("room", "createRoom", o.roomID)), o.socket.on("roomJudge", function (t) {
      "intoRoom" === t && cc.director.loadScene("FirstLevel"), wx.onShareAppMessage(function () {
        // 用户点击了“转发”按钮
        return {
          title: '房间号：' + o.roomID,
          imageUrl: g.globalda.userinfo.avatarUrl
        }
      })}))}}),cc._RF.pop()},{globalData:"globalData"}],

birdsJS:[function(t,e,n){"use strict";cc._RF.push(e,"71a4dj/f5VHuqRq3b3WMVyx","birdsJS");var o=t("globalData");cc.Class({extends:cc.Component,properties:{BirdsManage:{default:null,type:cc.Node},Particle:{default:null,type:cc.ParticleSystem},BoomAudioSource:{type:cc.AudioSource,default:null}},onLoad:function(){var n=this;this.global=cc.find("Canvas").getComponent("levelDataJS"),this.originLocation=this.node.getPosition(),this.goalLocation=null,this.changeLocationTime=3;o.socket.on("birdMove",function(t){if("begine"===o.gameState){console.log("bird == "+n.node),n.goalLocation=cc.v2(cc.view.getFrameSize().height*(1-t.x_Percent),cc.view.getFrameSize().width*t.y_Percent),n.node.stopAllActions();var e=cc.moveTo(t.changeTime,n.goalLocation.y,n.goalLocation.x);n.node.runAction(e)}}),o.socket.on("birdBeCatch",function(t){n.BoomAudioSource.play();var e=cc.instantiate(n.Particle.node);e.parent=n.node,e.setPosition(0,0),t.seat===o.seat?n.global.scoreLeft++:n.global.scoreRight++,n.node.stopAllActions(),n.scheduleOnce(function(){e.destroy(),this.node.setPosition(this.originLocation)},.15)})},start:function(){},update:function(t){}}),cc._RF.pop()},{globalData:"globalData"}],

birdsManagerJS:[function(t,e,n){"use strict";cc._RF.push(e,"14437FKm7BIzqTtSGFSCFEn","birdsManagerJS");t("globalData");cc.Class({extends:cc.Component,properties:{enemyPrefab:{default:null,type:cc.Node}},onLoad:function(){this.birdsPool=new cc.NodePool;for(var t=0;t<5;++t){var e=cc.instantiate(this.enemyPrefab);this.birdsPool.put(e)}this.birdsInSecen=1},createBird:function(){var t=null;(t=0<this.birdsPool.size()?this.birdsPool.get():cc.instantiate(this.enemyPrefab)).parent=cc.find("Canvas/RootComponent"),t.setPosition(.5*cc.view.getFrameSize().width,cc.view.getFrameSize().height+100),this.birdsInSecen=this.birdsInSecen+1},destoryBird:function(t){this.birdsPool.put(t),this.birdsInSecen=this.birdsInSecen-1},start:function(){},update:function(t){}}),cc._RF.pop()},{globalData:"globalData"}],

bulletJS:[function(t,e,n){"use strict";cc._RF.push(e,"5a38aKRRlhFdbcNXBmjNOsE","bulletJS");var o=t("globalData");cc.Class({extends:cc.Component,properties:{leftAnchor:{default:null,type:cc.Node},rightAnchor:{default:null,type:cc.Node},drawCanvas:{default:null,type:cc.Node},k:{default:.5,type:cc.Float},cursePoint:{default:null,type:cc.Node},bulletParticle:{default:null,type:cc.Node},fireAudioSource:{type:cc.AudioSource,default:null}},onLoad:function(){this.global=cc.find("Canvas").getComponent("levelDataJS"),this.leftAnchorPosition=this.leftAnchor.getPosition(),this.rightAnchorPosition=this.rightAnchor.getPosition(),this.originalMiddlePosition=this.leftAnchorPosition.add(this.rightAnchorPosition).mulSelf(.5),this.drawGraphics=this.drawCanvas.getComponent(cc.Graphics),this.rigidBody=this.node.getComponent(cc.RigidBody);var e=0;this.node.on("touchmove",function(t){"begine"===o.gameState&&("right"===o.seat?(e=t.getLocation().x-.5*cc.view.getFrameSize().width,console.log(e)):e=t.getLocation().x,t.getLocation().y<=this.originalMiddlePosition.y&e<.5*cc.view.getFrameSize().width&-10<e&&this.node.setPosition(e,t.getLocation().y))},this),this.node.on("touchstart",function(t){"begine"===o.gameState&&(this.rigidBody.active=!1)},this),this.node.on("touchend",function(t){"begine"===o.gameState&&(t.getLocation().y<this.originalMiddlePosition.y-20?(console.log("touchend"),this.rigidBody.active=!0,this.fireAudioSource.play(),this.bulletParticle.getComponent(cc.ParticleSystem).resetSystem(),this.bulletParticle.active=!0,o.sendToServer("Particleactive","bulletParticleactive",""),this.canFire=!0):this.node.setPosition(this.originalMiddlePosition))},this),this.node.on("touchcancel",function(t){"begine"===o.gameState&&(this.rigidBody.active=!0,0<this.global.bulletsNumber&&(this.canFire=!0,this.global.bulletsNumber--))},this)},Fire:function(t){var e=cc.pSub(this.originalMiddlePosition,t).mul(this.k);this.rigidBody.applyForceToCenter(e)},onCollisionEnter:function(t,e){this.rigidBody.linearVelocity=new cc.Vec2(0,0),this.node.setPosition(this.originalMiddlePosition),this.rigidBody.active=!1,this.bulletParticle.getComponent(cc.ParticleSystem).resetSystem(),this.bulletParticle.active=!1,o.sendToServer("fireResult","catchBird",{seat:o.seat})},drawLine:function(){this.drawGraphics.clear(!0),this.drawGraphics.moveTo(this.node.getPosition().x,this.node.getPosition().y),this.drawGraphics.lineTo(this.leftAnchorPosition.x,this.leftAnchorPosition.y),this.drawGraphics.moveTo(this.node.getPosition().x,this.node.getPosition().y),this.drawGraphics.lineTo(this.rightAnchorPosition.x,this.rightAnchorPosition.y),this.drawGraphics.stroke(),this.cursePoint.setPosition(this.node.getPosition())},drawCurve:function(){this.drawGraphics.clear(!0),this.drawGraphics.moveTo(this.leftAnchorPosition.x,this.leftAnchorPosition.y),this.drawGraphics.quadraticCurveTo(this.cursePoint.getPosition().x,this.cursePoint.getPosition().y,this.rightAnchorPosition.x,this.rightAnchorPosition.y),this.drawGraphics.stroke()},onEnable:function(){this.rigidBody.linearVelocity=new cc.Vec2(0,0),this.node.setPosition(this.originalMiddlePosition),this.rigidBody.active=!1},onDisable:function(){},start:function(){this.rigidBody.active=!1},update:function(t){var e=this.node.getPosition();this.canFire?(this.Fire(e),e.y>this.originalMiddlePosition.y&&(this.canFire=!1),o.sendToServer("move","bulletfly",e)):"begine"===o.gameState&&o.sendToServer("move","bulletmove",e),e.y>cc.view.getFrameSize().height|e.y<-10|e.x>o.X_RightBount|e.x<o.X_LeftBound&&(console.log("locationSelf.x    "+e.x),o.sendToServer("fireResult","outBound",""),this.rigidBody.linearVelocity=new cc.Vec2(0,0),this.node.setPosition(this.originalMiddlePosition),this.rigidBody.active=!1,this.bulletParticle.getComponent(cc.ParticleSystem).resetSystem(),this.bulletParticle.active=!1),e.y<=this.originalMiddlePosition.y?this.drawLine():this.drawCurve()}}),cc._RF.pop()},{globalData:"globalData"}],

globalData:[function(t,e,n){"use strict";cc._RF.push(e,"a8c94s3vqRA1YhG+IZ2HWeu","globalData");var r={playernumber:null,socket:null,originalMiddlePosition:null,drawGraphics:null,roomID:"",seat:"left",X_LeftBound:0,X_RightBount:160,selfInfo:{picture:"",name:""},rivalInfo:{picture:"",name:""},gameState:"over",sendToServer:function(t,e,n){var o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;r.socket.emit(t,{type:e,data:n}),o&&o()}};e.exports=r,cc._RF.pop()},{}],

levelDataJS:[function(t,e,n){"use strict";cc._RF.push(e,"34572pO8CFJN4g9DHXnWFmq","levelDataJS");var r=t("globalData");cc.Class({extends:cc.Component,properties:{leftBullet:{default:null,type:cc.Node},rightBullet:{default:null,type:cc.Node},lefthead:{default:null,type:cc.Node},righthead:{default:null,type:cc.Node},leftPlayerName:{default:null,type:cc.Node},rightPlayerName:{default:null,type:cc.Node},leftbulletpicture:{default:null,type:cc.Node},rightbulletpicture:{default:null,type:cc.Node}},onLoad:function(){if(this.scoreLeft=0,this.scoreRight=0,this.bulletsNumber=1,"right"===r.seat){this.leftBullet.setPosition(.5*cc.view.getFrameSize().width,0),this.rightBullet.setPosition(0,0),r.X_LeftBound=.5*-cc.view.getFrameSize().width,r.X_RightBount=.5*cc.view.getFrameSize().width;var o=this;cc.loader.load({url:r.selfInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.righthead.getComponent(cc.Sprite).spriteFrame=n}),this.rightPlayerName.getComponent(cc.Label).string=r.selfInfo.name,cc.loader.load({url:r.rivalInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.lefthead.getComponent(cc.Sprite).spriteFrame=n}),this.leftPlayerName.getComponent(cc.Label).string=r.rivalInfo.name,cc.loader.load({url:r.selfInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.rightbulletpicture.getComponent(cc.Sprite).spriteFrame=n}),cc.loader.load({url:r.rivalInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.leftbulletpicture.getComponent(cc.Sprite).spriteFrame=n})}else{r.X_LeftBound=-20,r.X_RightBount=cc.view.getFrameSize().width+20;o=this;cc.loader.load({url:r.selfInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.lefthead.getComponent(cc.Sprite).spriteFrame=n}),cc.loader.load({url:r.selfInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.rightbulletpicture.getComponent(cc.Sprite).spriteFrame=n}),this.leftPlayerName.getComponent(cc.Label).string=r.selfInfo.name,r.socket.on("showRivalInfo",function(t){console.log("showRivalInfo"),cc.loader.load({url:r.rivalInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.righthead.getComponent(cc.Sprite).spriteFrame=n}),o.rightPlayerName.getComponent(cc.Label).string=r.rivalInfo.name,cc.loader.load({url:r.rivalInfo.picture,type:"jpg"},function(t,e){var n=new cc.SpriteFrame(e);o.leftbulletpicture.getComponent(cc.Sprite).spriteFrame=n})})}},start:function(){}}),cc._RF.pop()},{globalData:"globalData"}],


  menuButtonJS: [function (t, e, n) {
    "use strict"; cc._RF.push(e, "4179719ZmBEt6mdUF6aYi3X", "menuButtonJS"); var o = t("globalData"); cc.Class({
      extends: cc.Component, properties: {}, ContinueButtonClick: function (t) { }, QuitButtonClick: function (t) {
        o.sendToServer("game", "quitgame", ""), wx.exitMiniProgram({
          success: function (res) {  //退出游戏
            console.log("退出游戏");
          }
        })
        },gameOver:function(t){o.sendToServer("game","gameover","")},onLoad:function(){},start:function(){}}),cc._RF.pop()},{globalData:"globalData"}],

menuJS:[function(t,e,n){"use strict";cc._RF.push(e,"7cb436NwbNOYKtQjAhUY0Kl","menuJS");var o=t("globalData");cc.Class({extends:cc.Component,properties:{Score:{default:null,type:cc.Node},ScoreAI:{default:null,type:cc.Node},ContinueButton:{default:null,type:cc.Node},QuitButton:{default:null,type:cc.Node}},onLoad:function(){},onEnable:function(){this.global=cc.find("Canvas").getComponent("levelDataJS"),o.seat,this.scoreLabel=this.Score.getComponent(cc.Label),this.scoreLabel.string=this.global.scoreLeft,this.scoreAILabel=this.ScoreAI.getComponent(cc.Label),this.scoreAILabel.string=this.global.scoreRight},start:function(){}}),cc._RF.pop()},{globalData:"globalData"}],

scoreJS:[function(t,e,n){"use strict";cc._RF.push(e,"cd1b1Fs/9FPkaDj6DmzKwW8","scoreJS");var o=t("globalData");cc.Class({extends:cc.Component,properties:{Score:{default:null,type:cc.Node},ScoreAI:{default:null,type:cc.Node}},onLoad:function(){console.log("Score =="+this.Score),this.global=cc.find("Canvas").getComponent("levelDataJS"),"left"===o.seat?(this.scoreLabel=this.Score.getComponent(cc.Label),this.scoreLabel.string=this.global.scoreLeft,this.scoreAILabel=this.ScoreAI.getComponent(cc.Label),this.scoreAILabel.string=this.global.scoreRight):(this.scoreLabel=this.Score.getComponent(cc.Label),this.scoreLabel.string=this.global.scoreRight,this.scoreAILabel=this.ScoreAI.getComponent(cc.Label),this.scoreAILabel.string=this.global.scoreLeft)},start:function(){},update:function(t){"left"===o.seat?(this.scoreLabel=this.Score.getComponent(cc.Label),this.scoreLabel.string=this.global.scoreLeft,this.scoreAILabel=this.ScoreAI.getComponent(cc.Label),this.scoreAILabel.string=this.global.scoreRight):(this.scoreLabel=this.Score.getComponent(cc.Label),this.scoreLabel.string=this.global.scoreRight,this.scoreAILabel=this.ScoreAI.getComponent(cc.Label),this.scoreAILabel.string=this.global.scoreLeft)}}),cc._RF.pop()},{globalData:"globalData"}],

"socket.io": [function (u, e, n) { (function (r) { "use strict"; cc._RF.push(e, "32d9fPVaHxD0r0OUSPC5pGY", "socket.io"); var M = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (t) { return typeof t } : function (t) { return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol" : typeof t }; (function (t) { if ("object" === (void 0 === n ? "undefined" : M(n)) && void 0 !== e) e.exports = t(); else if ("function" == typeof define && define.amd) define([], t); else { ("undefined" != typeof window ? window : void 0 !== r ? r : "undefined" != typeof self ? self : this).io = t() } })(function () { return function i(s, a, c) { function l(n, t) { if (!a[n]) { if (!s[n]) { var e = "function" == typeof u && u; if (!t && e) return e(n, !0); if (h) return h(n, !0); var o = new Error("Cannot find module '" + n + "'"); throw o.code = "MODULE_NOT_FOUND", o } var r = a[n] = { exports: {} }; s[n][0].call(r.exports, function (t) { var e = s[n][1][t]; return l(e || t) }, r, r.exports, i, s, a, c) } return a[n].exports } for (var h = "function" == typeof u && u, t = 0; t < c.length; t++)l(c[t]); return l }({ 1: [function (t, e, n) { var c = t("./url"), o = t("socket.io-parser"), l = t("./manager"), h = t("debug")("socket.io-client"); e.exports = n = r; var u = n.managers = {}; function r(t, e) { "object" == (void 0 === t ? "undefined" : M(t)) && (e = t, t = void 0), e = e || {}; var n, o = c(t), r = o.source, i = o.id, s = o.path, a = u[i] && s in u[i].nsps; return e.forceNew || e["force new connection"] || !1 === e.multiplex || a ? (h("ignoring socket cache for %s", r), n = l(r, e)) : (u[i] || (h("new io instance for %s", r), u[i] = l(r, e)), n = u[i]), n.socket(o.path) } n.protocol = o.protocol, n.connect = r, n.Manager = t("./manager"), n.Socket = t("./socket") }, { "./manager": 2, "./socket": 4, "./url": 5, debug: 14, "socket.io-parser": 40 }], 2: [function (t, e, n) { var a = t("engine.io-client"), r = t("./socket"), o = t("component-emitter"), i = t("socket.io-parser"), c = t("./on"), s = t("component-bind"), l = t("debug")("socket.io-client:manager"), h = t("indexof"), u = t("backo2"), p = Object.prototype.hasOwnProperty; function f(t, e) { if (!(this instanceof f)) return new f(t, e); t && "object" == (void 0 === t ? "undefined" : M(t)) && (e = t, t = void 0), (e = e || {}).path = e.path || "/socket.io", this.nsps = {}, this.subs = [], this.opts = e, this.reconnection(!1 !== e.reconnection), this.reconnectionAttempts(e.reconnectionAttempts || 1 / 0), this.reconnectionDelay(e.reconnectionDelay || 1e3), this.reconnectionDelayMax(e.reconnectionDelayMax || 5e3), this.randomizationFactor(e.randomizationFactor || .5), this.backoff = new u({ min: this.reconnectionDelay(), max: this.reconnectionDelayMax(), jitter: this.randomizationFactor() }), this.timeout(null == e.timeout ? 2e4 : e.timeout), this.readyState = "closed", this.uri = t, this.connecting = [], this.lastPing = null, this.encoding = !1, this.packetBuffer = [], this.encoder = new i.Encoder, this.decoder = new i.Decoder, this.autoConnect = !1 !== e.autoConnect, this.autoConnect && this.open() } (e.exports = f).prototype.emitAll = function () { for (var t in this.emit.apply(this, arguments), this.nsps) p.call(this.nsps, t) && this.nsps[t].emit.apply(this.nsps[t], arguments) }, f.prototype.updateSocketIds = function () { for (var t in this.nsps) p.call(this.nsps, t) && (this.nsps[t].id = this.engine.id) }, o(f.prototype), f.prototype.reconnection = function (t) { return arguments.length ? (this._reconnection = !!t, this) : this._reconnection }, f.prototype.reconnectionAttempts = function (t) { return arguments.length ? (this._reconnectionAttempts = t, this) : this._reconnectionAttempts }, f.prototype.reconnectionDelay = function (t) { return arguments.length ? (this._reconnectionDelay = t, this.backoff && this.backoff.setMin(t), this) : this._reconnectionDelay }, f.prototype.randomizationFactor = function (t) { return arguments.length ? (this._randomizationFactor = t, this.backoff && this.backoff.setJitter(t), this) : this._randomizationFactor }, f.prototype.reconnectionDelayMax = function (t) { return arguments.length ? (this._reconnectionDelayMax = t, this.backoff && this.backoff.setMax(t), this) : this._reconnectionDelayMax }, f.prototype.timeout = function (t) { return arguments.length ? (this._timeout = t, this) : this._timeout }, f.prototype.maybeReconnectOnOpen = function () { !this.reconnecting && this._reconnection && 0 === this.backoff.attempts && this.reconnect() }, f.prototype.open = f.prototype.connect = function (n) { if (l("readyState %s", this.readyState), ~this.readyState.indexOf("open")) return this; l("opening %s", this.uri), this.engine = a(this.uri, this.opts); var t = this.engine, o = this; this.readyState = "opening", this.skipReconnect = !1; var e = c(t, "open", function () { o.onopen(), n && n() }), r = c(t, "error", function (t) { if (l("connect_error"), o.cleanup(), o.readyState = "closed", o.emitAll("connect_error", t), n) { var e = new Error("Connection error"); e.data = t, n(e) } else o.maybeReconnectOnOpen() }); if (!1 !== this._timeout) { var i = this._timeout; l("connect attempt will timeout after %d", i); var s = setTimeout(function () { l("connect attempt timed out after %d", i), e.destroy(), t.close(), t.emit("error", "timeout"), o.emitAll("connect_timeout", i) }, i); this.subs.push({ destroy: function () { clearTimeout(s) } }) } return this.subs.push(e), this.subs.push(r), this }, f.prototype.onopen = function () { l("open"), this.cleanup(), this.readyState = "open", this.emit("open"); var t = this.engine; this.subs.push(c(t, "data", s(this, "ondata"))), this.subs.push(c(t, "ping", s(this, "onping"))), this.subs.push(c(t, "pong", s(this, "onpong"))), this.subs.push(c(t, "error", s(this, "onerror"))), this.subs.push(c(t, "close", s(this, "onclose"))), this.subs.push(c(this.decoder, "decoded", s(this, "ondecoded"))) }, f.prototype.onping = function () { this.lastPing = new Date, this.emitAll("ping") }, f.prototype.onpong = function () { this.emitAll("pong", new Date - this.lastPing) }, f.prototype.ondata = function (t) { this.decoder.add(t) }, f.prototype.ondecoded = function (t) { this.emit("packet", t) }, f.prototype.onerror = function (t) { l("error", t), this.emitAll("error", t) }, f.prototype.socket = function (t) { var e = this.nsps[t]; if (!e) { e = new r(this, t), this.nsps[t] = e; var n = this; e.on("connecting", o), e.on("connect", function () { e.id = n.engine.id }), this.autoConnect && o() } function o() { ~h(n.connecting, e) || n.connecting.push(e) } return e }, f.prototype.destroy = function (t) { var e = h(this.connecting, t); ~e && this.connecting.splice(e, 1), this.connecting.length || this.close() }, f.prototype.packet = function (n) { l("writing packet %j", n); var o = this; o.encoding ? o.packetBuffer.push(n) : (o.encoding = !0, this.encoder.encode(n, function (t) { for (var e = 0; e < t.length; e++)o.engine.write(t[e], n.options); o.encoding = !1, o.processPacketQueue() })) }, f.prototype.processPacketQueue = function () { if (0 < this.packetBuffer.length && !this.encoding) { var t = this.packetBuffer.shift(); this.packet(t) } }, f.prototype.cleanup = function () { var t; for (l("cleanup"); t = this.subs.shift();)t.destroy(); this.packetBuffer = [], this.encoding = !1, this.lastPing = null, this.decoder.destroy() }, f.prototype.close = f.prototype.disconnect = function () { l("disconnect"), this.skipReconnect = !0, this.reconnecting = !1, "opening" == this.readyState && this.cleanup(), this.backoff.reset(), this.readyState = "closed", this.engine && this.engine.close() }, f.prototype.onclose = function (t) { l("onclose"), this.cleanup(), this.backoff.reset(), this.readyState = "closed", this.emit("close", t), this._reconnection && !this.skipReconnect && this.reconnect() }, f.prototype.reconnect = function () { if (this.reconnecting || this.skipReconnect) return this; var e = this; if (this.backoff.attempts >= this._reconnectionAttempts) l("reconnect failed"), this.backoff.reset(), this.emitAll("reconnect_failed"), this.reconnecting = !1; else { var t = this.backoff.duration(); l("will wait %dms before reconnect attempt", t), this.reconnecting = !0; var n = setTimeout(function () { e.skipReconnect || (l("attempting reconnect"), e.emitAll("reconnect_attempt", e.backoff.attempts), e.emitAll("reconnecting", e.backoff.attempts), e.skipReconnect || e.open(function (t) { t ? (l("reconnect attempt error"), e.reconnecting = !1, e.reconnect(), e.emitAll("reconnect_error", t.data)) : (l("reconnect success"), e.onreconnect()) })) }, t); this.subs.push({ destroy: function () { clearTimeout(n) } }) } }, f.prototype.onreconnect = function () { var t = this.backoff.attempts; this.reconnecting = !1, this.backoff.reset(), this.updateSocketIds(), this.emitAll("reconnect", t) } }, { "./on": 3, "./socket": 4, backo2: 8, "component-bind": 11, "component-emitter": 12, debug: 14, "engine.io-client": 16, indexof: 32, "socket.io-parser": 40 }], 3: [function (t, e, n) { e.exports = function (t, e, n) { return t.on(e, n), { destroy: function () { t.removeListener(e, n) } } } }, {}], 4: [function (t, e, n) { var i = t("socket.io-parser"), o = t("component-emitter"), s = t("to-array"), r = t("./on"), a = t("component-bind"), c = t("debug")("socket.io-client:socket"), l = t("has-binary"); e.exports = p; var h = { connect: 1, connect_error: 1, connect_timeout: 1, connecting: 1, disconnect: 1, error: 1, reconnect: 1, reconnect_attempt: 1, reconnect_failed: 1, reconnect_error: 1, reconnecting: 1, ping: 1, pong: 1 }, u = o.prototype.emit; function p(t, e) { this.io = t, this.nsp = e, (this.json = this).ids = 0, this.acks = {}, this.receiveBuffer = [], this.sendBuffer = [], this.connected = !1, this.disconnected = !0, this.io.autoConnect && this.open() } o(p.prototype), p.prototype.subEvents = function () { if (!this.subs) { var t = this.io; this.subs = [r(t, "open", a(this, "onopen")), r(t, "packet", a(this, "onpacket")), r(t, "close", a(this, "onclose"))] } }, p.prototype.open = p.prototype.connect = function () { return this.connected || (this.subEvents(), this.io.open(), "open" == this.io.readyState && this.onopen(), this.emit("connecting")), this }, p.prototype.send = function () { var t = s(arguments); return t.unshift("message"), this.emit.apply(this, t), this }, p.prototype.emit = function (t) { if (h.hasOwnProperty(t)) return u.apply(this, arguments), this; var e = s(arguments), n = i.EVENT; l(e) && (n = i.BINARY_EVENT); var o = { type: n, data: e, options: {} }; return o.options.compress = !this.flags || !1 !== this.flags.compress, "function" == typeof e[e.length - 1] && (c("emitting packet with ack id %d", this.ids), this.acks[this.ids] = e.pop(), o.id = this.ids++), this.connected ? this.packet(o) : this.sendBuffer.push(o), delete this.flags, this }, p.prototype.packet = function (t) { t.nsp = this.nsp, this.io.packet(t) }, p.prototype.onopen = function () { c("transport is open - connecting"), "/" != this.nsp && this.packet({ type: i.CONNECT }) }, p.prototype.onclose = function (t) { c("close (%s)", t), this.connected = !1, this.disconnected = !0, delete this.id, this.emit("disconnect", t) }, p.prototype.onpacket = function (t) { if (t.nsp == this.nsp) switch (t.type) { case i.CONNECT: this.onconnect(); break; case i.EVENT: case i.BINARY_EVENT: this.onevent(t); break; case i.ACK: case i.BINARY_ACK: this.onack(t); break; case i.DISCONNECT: this.ondisconnect(); break; case i.ERROR: this.emit("error", t.data) } }, p.prototype.onevent = function (t) { var e = t.data || []; c("emitting event %j", e), null != t.id && (c("attaching ack callback to event"), e.push(this.ack(t.id))), this.connected ? u.apply(this, e) : this.receiveBuffer.push(e) }, p.prototype.ack = function (n) { var o = this, r = !1; return function () { if (!r) { r = !0; var t = s(arguments); c("sending ack %j", t); var e = l(t) ? i.BINARY_ACK : i.ACK; o.packet({ type: e, id: n, data: t }) } } }, p.prototype.onack = function (t) { var e = this.acks[t.id]; "function" == typeof e ? (c("calling ack %s with %j", t.id, t.data), e.apply(this, t.data), delete this.acks[t.id]) : c("bad ack %s", t.id) }, p.prototype.onconnect = function () { this.connected = !0, this.disconnected = !1, this.emit("connect"), this.emitBuffered() }, p.prototype.emitBuffered = function () { var t; for (t = 0; t < this.receiveBuffer.length; t++)u.apply(this, this.receiveBuffer[t]); for (this.receiveBuffer = [], t = 0; t < this.sendBuffer.length; t++)this.packet(this.sendBuffer[t]); this.sendBuffer = [] }, p.prototype.ondisconnect = function () { c("server disconnect (%s)", this.nsp), this.destroy(), this.onclose("io server disconnect") }, p.prototype.destroy = function () { if (this.subs) { for (var t = 0; t < this.subs.length; t++)this.subs[t].destroy(); this.subs = null } this.io.destroy(this) }, p.prototype.close = p.prototype.disconnect = function () { return this.connected && (c("performing disconnect (%s)", this.nsp), this.packet({ type: i.DISCONNECT })), this.destroy(), this.connected && this.onclose("io client disconnect"), this }, p.prototype.compress = function (t) { return this.flags = this.flags || {}, this.flags.compress = t, this } }, { "./on": 3, "component-bind": 11, "component-emitter": 12, debug: 14, "has-binary": 30, "socket.io-parser": 40, "to-array": 43 }], 5: [function (t, e, n) { (function (r) { var i = t("parseuri"), s = t("debug")("socket.io-client:url"); e.exports = function (t, e) { var n = t, e = e || r.location; null == t && (t = e.protocol + "//" + e.host); "string" == typeof t && ("/" == t.charAt(0) && (t = "/" == t.charAt(1) ? e.protocol + t : e.host + t), /^(https?|wss?):\/\//.test(t) || (s("protocol-less url %s", t), t = void 0 !== e ? e.protocol + "//" + t : "https://" + t), s("parse %s", t), n = i(t)); n.port || (/^(http|ws)$/.test(n.protocol) ? n.port = "80" : /^(http|ws)s$/.test(n.protocol) && (n.port = "443")); n.path = n.path || "/"; var o = -1 !== n.host.indexOf(":") ? "[" + n.host + "]" : n.host; return n.id = n.protocol + "://" + o + ":" + n.port, n.href = n.protocol + "://" + o + (e && e.port == n.port ? "" : ":" + n.port), n } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { debug: 14, parseuri: 38 }], 6: [function (t, e, n) { function s() { } e.exports = function (t, n, o) { var r = !1; return o = o || s, 0 === (i.count = t) ? n() : i; function i(t, e) { if (i.count <= 0) throw new Error("after called too many times"); --i.count, t ? (r = !0, n(t), n = o) : 0 !== i.count || r || n(null, e) } } }, {}], 7: [function (t, e, n) { e.exports = function (t, e, n) { var o = t.byteLength; if (e = e || 0, n = n || o, t.slice) return t.slice(e, n); if (e < 0 && (e += o), n < 0 && (n += o), o < n && (n = o), o <= e || n <= e || 0 === o) return new ArrayBuffer(0); for (var r = new Uint8Array(t), i = new Uint8Array(n - e), s = e, a = 0; s < n; s++ , a++)i[a] = r[s]; return i.buffer } }, {}], 8: [function (t, e, n) { function o(t) { t = t || {}, this.ms = t.min || 100, this.max = t.max || 1e4, this.factor = t.factor || 2, this.jitter = 0 < t.jitter && t.jitter <= 1 ? t.jitter : 0, this.attempts = 0 } (e.exports = o).prototype.duration = function () { var t = this.ms * Math.pow(this.factor, this.attempts++); if (this.jitter) { var e = Math.random(), n = Math.floor(e * this.jitter * t); t = 0 == (1 & Math.floor(10 * e)) ? t - n : t + n } return 0 | Math.min(t, this.max) }, o.prototype.reset = function () { this.attempts = 0 }, o.prototype.setMin = function (t) { this.ms = t }, o.prototype.setMax = function (t) { this.max = t }, o.prototype.setJitter = function (t) { this.jitter = t } }, {}], 9: [function (t, e, n) { (function () { for (var i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", u = new Uint8Array(256), t = 0; t < i.length; t++)u[i.charCodeAt(t)] = t; n.encode = function (t) { var e, n = new Uint8Array(t), o = n.length, r = ""; for (e = 0; e < o; e += 3)r += i[n[e] >> 2], r += i[(3 & n[e]) << 4 | n[e + 1] >> 4], r += i[(15 & n[e + 1]) << 2 | n[e + 2] >> 6], r += i[63 & n[e + 2]]; return o % 3 == 2 ? r = r.substring(0, r.length - 1) + "=" : o % 3 == 1 && (r = r.substring(0, r.length - 2) + "=="), r }, n.decode = function (t) { var e, n, o, r, i, s = .75 * t.length, a = t.length, c = 0; "=" === t[t.length - 1] && (s-- , "=" === t[t.length - 2] && s--); var l = new ArrayBuffer(s), h = new Uint8Array(l); for (e = 0; e < a; e += 4)n = u[t.charCodeAt(e)], o = u[t.charCodeAt(e + 1)], r = u[t.charCodeAt(e + 2)], i = u[t.charCodeAt(e + 3)], h[c++] = n << 2 | o >> 4, h[c++] = (15 & o) << 4 | r >> 2, h[c++] = (3 & r) << 6 | 63 & i; return l } })() }, {}], 10: [function (t, c, e) { (function (t) { var r = t.BlobBuilder || t.WebKitBlobBuilder || t.MSBlobBuilder || t.MozBlobBuilder, e = function () { try { return 2 === new Blob(["hi"]).size } catch (t) { return !1 } }(), n = e && function () { try { return 2 === new Blob([new Uint8Array([1, 2])]).size } catch (t) { return !1 } }(), o = r && r.prototype.append && r.prototype.getBlob; function i(t) { for (var e = 0; e < t.length; e++) { var n = t[e]; if (n.buffer instanceof ArrayBuffer) { var o = n.buffer; if (n.byteLength !== o.byteLength) { var r = new Uint8Array(n.byteLength); r.set(new Uint8Array(o, n.byteOffset, n.byteLength)), o = r.buffer } t[e] = o } } } function s(t, e) { e = e || {}; var n = new r; i(t); for (var o = 0; o < t.length; o++)n.append(t[o]); return e.type ? n.getBlob(e.type) : n.getBlob() } function a(t, e) { return i(t), new Blob(t, e || {}) } c.exports = e ? n ? t.Blob : a : o ? s : void 0 }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, {}], 11: [function (t, e, n) { var o = [].slice; e.exports = function (t, e) { if ("string" == typeof e && (e = t[e]), "function" != typeof e) throw new Error("bind() requires a function"); var n = o.call(arguments, 2); return function () { return e.apply(t, n.concat(o.call(arguments))) } } }, {}], 12: [function (t, e, n) { function o(t) { if (t) return function (t) { for (var e in o.prototype) t[e] = o.prototype[e]; return t }(t) } (e.exports = o).prototype.on = o.prototype.addEventListener = function (t, e) { return this._callbacks = this._callbacks || {}, (this._callbacks["$" + t] = this._callbacks["$" + t] || []).push(e), this }, o.prototype.once = function (t, e) { function n() { this.off(t, n), e.apply(this, arguments) } return n.fn = e, this.on(t, n), this }, o.prototype.off = o.prototype.removeListener = o.prototype.removeAllListeners = o.prototype.removeEventListener = function (t, e) { if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this; var n, o = this._callbacks["$" + t]; if (!o) return this; if (1 == arguments.length) return delete this._callbacks["$" + t], this; for (var r = 0; r < o.length; r++)if ((n = o[r]) === e || n.fn === e) { o.splice(r, 1); break } return this }, o.prototype.emit = function (t) { this._callbacks = this._callbacks || {}; var e = [].slice.call(arguments, 1), n = this._callbacks["$" + t]; if (n) for (var o = 0, r = (n = n.slice(0)).length; o < r; ++o)n[o].apply(this, e); return this }, o.prototype.listeners = function (t) { return this._callbacks = this._callbacks || {}, this._callbacks["$" + t] || [] }, o.prototype.hasListeners = function (t) { return !!this.listeners(t).length } }, {}], 13: [function (t, e, n) { e.exports = function (t, e) { var n = function () { }; n.prototype = e.prototype, t.prototype = new n, t.prototype.constructor = t } }, {}], 14: [function (t, e, i) { function n() { var t; try { t = i.storage.debug } catch (t) { } return t } (i = e.exports = t("./debug")).log = function () { return "object" === ("undefined" == typeof console ? "undefined" : M(console)) && console.log && Function.prototype.apply.call(console.log, console, arguments) }, i.formatArgs = function () { var t = arguments, e = this.useColors; if (t[0] = (e ? "%c" : "") + this.namespace + (e ? " %c" : " ") + t[0] + (e ? "%c " : " ") + "+" + i.humanize(this.diff), !e) return t; var n = "color: " + this.color; t = [t[0], n, "color: inherit"].concat(Array.prototype.slice.call(t, 1)); var o = 0, r = 0; return t[0].replace(/%[a-z%]/g, function (t) { "%%" !== t && (o++ , "%c" === t && (r = o)) }), t.splice(r, 0, n), t }, i.save = function (t) { try { null == t ? i.storage.removeItem("debug") : i.storage.debug = t } catch (t) { } }, i.load = n, i.useColors = function () { return "WebkitAppearance" in document.documentElement.style || window.console && (console.firebug || console.exception && console.table) || navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/) && 31 <= parseInt(RegExp.$1, 10) }, i.storage = "undefined" != typeof chrome && void 0 !== chrome.storage ? chrome.storage.local : function () { try { return window.localStorage } catch (t) { } }(), i.colors = ["lightseagreen", "forestgreen", "goldenrod", "dodgerblue", "darkorchid", "crimson"], i.formatters.j = function (t) { return JSON.stringify(t) }, i.enable(n()) }, { "./debug": 15 }], 15: [function (t, e, a) { (a = e.exports = function (t) { function e() { } function o() { var r = o, t = +new Date, e = t - (c || t); r.diff = e, r.prev = c, r.curr = t, c = t, null == r.useColors && (r.useColors = a.useColors()), null == r.color && r.useColors && (r.color = a.colors[l++ % a.colors.length]); var i = Array.prototype.slice.call(arguments); i[0] = a.coerce(i[0]), "string" != typeof i[0] && (i = ["%o"].concat(i)); var s = 0; i[0] = i[0].replace(/%([a-z%])/g, function (t, e) { if ("%%" === t) return t; s++; var n = a.formatters[e]; if ("function" == typeof n) { var o = i[s]; t = n.call(r, o), i.splice(s, 1), s-- } return t }), "function" == typeof a.formatArgs && (i = a.formatArgs.apply(r, i)); var n = o.log || a.log || console.log.bind(console); n.apply(r, i) } e.enabled = !1, o.enabled = !0; var n = a.enabled(t) ? o : e; return n.namespace = t, n }).coerce = function (t) { return t instanceof Error ? t.stack || t.message : t }, a.disable = function () { a.enable("") }, a.enable = function (t) { a.save(t); for (var e = (t || "").split(/[\s,]+/), n = e.length, o = 0; o < n; o++)e[o] && ("-" === (t = e[o].replace(/\*/g, ".*?"))[0] ? a.skips.push(new RegExp("^" + t.substr(1) + "$")) : a.names.push(new RegExp("^" + t + "$"))) }, a.enabled = function (t) { var e, n; for (e = 0, n = a.skips.length; e < n; e++)if (a.skips[e].test(t)) return !1; for (e = 0, n = a.names.length; e < n; e++)if (a.names[e].test(t)) return !0; return !1 }, a.humanize = t("ms"), a.names = [], a.skips = [], a.formatters = {}; var c, l = 0 }, { ms: 35 }], 16: [function (t, e, n) { e.exports = t("./lib/") }, { "./lib/": 17 }], 17: [function (t, e, n) { e.exports = t("./socket"), e.exports.parser = t("engine.io-parser") }, { "./socket": 18, "engine.io-parser": 27 }], 18: [function (e, l, t) { (function (o) { var n = e("./transports"), t = e("component-emitter"), u = e("debug")("engine.io-client:socket"), r = e("indexof"), i = e("engine.io-parser"), s = e("parseuri"), a = e("parsejson"), c = e("parseqs"); function p(t, e) { if (!(this instanceof p)) return new p(t, e); e = e || {}, t && "object" == (void 0 === t ? "undefined" : M(t)) && (e = t, t = null), t ? (t = s(t), e.hostname = t.host, e.secure = "https" == t.protocol || "wss" == t.protocol, e.port = t.port, t.query && (e.query = t.query)) : e.host && (e.hostname = s(e.host).host), this.secure = null != e.secure ? e.secure : o.location && "https:" == location.protocol, e.hostname && !e.port && (e.port = this.secure ? "443" : "80"), this.agent = e.agent || !1, this.hostname = e.hostname || (o.location ? location.hostname : "localhost"), this.port = e.port || (o.location && location.port ? location.port : this.secure ? 443 : 80), this.query = e.query || {}, "string" == typeof this.query && (this.query = c.decode(this.query)), this.upgrade = !1 !== e.upgrade, this.path = (e.path || "/engine.io").replace(/\/$/, "") + "/", this.forceJSONP = !!e.forceJSONP, this.jsonp = !1 !== e.jsonp, this.forceBase64 = !!e.forceBase64, this.enablesXDR = !!e.enablesXDR, this.timestampParam = e.timestampParam || "t", this.timestampRequests = e.timestampRequests, this.transports = e.transports || ["polling", "websocket"], this.readyState = "", this.writeBuffer = [], this.policyPort = e.policyPort || 843, this.rememberUpgrade = e.rememberUpgrade || !1, this.binaryType = null, this.onlyBinaryUpgrades = e.onlyBinaryUpgrades, this.perMessageDeflate = !1 !== e.perMessageDeflate && (e.perMessageDeflate || {}), !0 === this.perMessageDeflate && (this.perMessageDeflate = {}), this.perMessageDeflate && null == this.perMessageDeflate.threshold && (this.perMessageDeflate.threshold = 1024), this.pfx = e.pfx || null, this.key = e.key || null, this.passphrase = e.passphrase || null, this.cert = e.cert || null, this.ca = e.ca || null, this.ciphers = e.ciphers || null, this.rejectUnauthorized = void 0 === e.rejectUnauthorized || e.rejectUnauthorized; var n = "object" == (void 0 === o ? "undefined" : M(o)) && o; n.global === n && e.extraHeaders && 0 < Object.keys(e.extraHeaders).length && (this.extraHeaders = e.extraHeaders), this.open() } (l.exports = p).priorWebsocketSuccess = !1, t(p.prototype), p.protocol = i.protocol, (p.Socket = p).Transport = e("./transport"), p.transports = e("./transports"), p.parser = e("engine.io-parser"), p.prototype.createTransport = function (t) { u('creating transport "%s"', t); var e = function (t) { var e = {}; for (var n in t) t.hasOwnProperty(n) && (e[n] = t[n]); return e }(this.query); return e.EIO = i.protocol, e.transport = t, this.id && (e.sid = this.id), new n[t]({ agent: this.agent, hostname: this.hostname, port: this.port, secure: this.secure, path: this.path, query: e, forceJSONP: this.forceJSONP, jsonp: this.jsonp, forceBase64: this.forceBase64, enablesXDR: this.enablesXDR, timestampRequests: this.timestampRequests, timestampParam: this.timestampParam, policyPort: this.policyPort, socket: this, pfx: this.pfx, key: this.key, passphrase: this.passphrase, cert: this.cert, ca: this.ca, ciphers: this.ciphers, rejectUnauthorized: this.rejectUnauthorized, perMessageDeflate: this.perMessageDeflate, extraHeaders: this.extraHeaders }) }, p.prototype.open = function () { var t; if (this.rememberUpgrade && p.priorWebsocketSuccess && -1 != this.transports.indexOf("websocket")) t = "websocket"; else { if (0 === this.transports.length) { var e = this; return void setTimeout(function () { e.emit("error", "No transports available") }, 0) } t = this.transports[0] } this.readyState = "opening"; try { t = this.createTransport(t) } catch (t) { return this.transports.shift(), void this.open() } t.open(), this.setTransport(t) }, p.prototype.setTransport = function (t) { u("setting transport %s", t.name); var e = this; this.transport && (u("clearing existing transport %s", this.transport.name), this.transport.removeAllListeners()), (this.transport = t).on("drain", function () { e.onDrain() }).on("packet", function (t) { e.onPacket(t) }).on("error", function (t) { e.onError(t) }).on("close", function () { e.onClose("transport close") }) }, p.prototype.probe = function (n) { u('probing transport "%s"', n); var o = this.createTransport(n, { probe: 1 }), r = !1, i = this; function t() { if (i.onlyBinaryUpgrades) { var t = !this.supportsBinary && i.transport.supportsBinary; r = r || t } r || (u('probe transport "%s" opened', n), o.send([{ type: "ping", data: "probe" }]), o.once("packet", function (t) { if (!r) if ("pong" == t.type && "probe" == t.data) { if (u('probe transport "%s" pong', n), i.upgrading = !0, i.emit("upgrading", o), !o) return; p.priorWebsocketSuccess = "websocket" == o.name, u('pausing current transport "%s"', i.transport.name), i.transport.pause(function () { r || "closed" != i.readyState && (u("changing transport and sending upgrade packet"), h(), i.setTransport(o), o.send([{ type: "upgrade" }]), i.emit("upgrade", o), o = null, i.upgrading = !1, i.flush()) }) } else { u('probe transport "%s" failed', n); var e = new Error("probe error"); e.transport = o.name, i.emit("upgradeError", e) } })) } function s() { r || (r = !0, h(), o.close(), o = null) } function e(t) { var e = new Error("probe error: " + t); e.transport = o.name, s(), u('probe transport "%s" failed because of error: %s', n, t), i.emit("upgradeError", e) } function a() { e("transport closed") } function c() { e("socket closed") } function l(t) { o && t.name != o.name && (u('"%s" works - aborting "%s"', t.name, o.name), s()) } function h() { o.removeListener("open", t), o.removeListener("error", e), o.removeListener("close", a), i.removeListener("close", c), i.removeListener("upgrading", l) } p.priorWebsocketSuccess = !1, o.once("open", t), o.once("error", e), o.once("close", a), this.once("close", c), this.once("upgrading", l), o.open() }, p.prototype.onOpen = function () { if (u("socket open"), this.readyState = "open", p.priorWebsocketSuccess = "websocket" == this.transport.name, this.emit("open"), this.flush(), "open" == this.readyState && this.upgrade && this.transport.pause) { u("starting upgrade probes"); for (var t = 0, e = this.upgrades.length; t < e; t++)this.probe(this.upgrades[t]) } }, p.prototype.onPacket = function (t) { if ("opening" == this.readyState || "open" == this.readyState) switch (u('socket receive: type "%s", data "%s"', t.type, t.data), this.emit("packet", t), this.emit("heartbeat"), t.type) { case "open": this.onHandshake(a(t.data)); break; case "pong": this.setPing(), this.emit("pong"); break; case "error": var e = new Error("server error"); e.code = t.data, this.onError(e); break; case "message": this.emit("data", t.data), this.emit("message", t.data) } else u('packet received with socket readyState "%s"', this.readyState) }, p.prototype.onHandshake = function (t) { this.emit("handshake", t), this.id = t.sid, this.transport.query.sid = t.sid, this.upgrades = this.filterUpgrades(t.upgrades), this.pingInterval = t.pingInterval, this.pingTimeout = t.pingTimeout, this.onOpen(), "closed" != this.readyState && (this.setPing(), this.removeListener("heartbeat", this.onHeartbeat), this.on("heartbeat", this.onHeartbeat)) }, p.prototype.onHeartbeat = function (t) { clearTimeout(this.pingTimeoutTimer); var e = this; e.pingTimeoutTimer = setTimeout(function () { "closed" != e.readyState && e.onClose("ping timeout") }, t || e.pingInterval + e.pingTimeout) }, p.prototype.setPing = function () { var t = this; clearTimeout(t.pingIntervalTimer), t.pingIntervalTimer = setTimeout(function () { u("writing ping packet - expecting pong within %sms", t.pingTimeout), t.ping(), t.onHeartbeat(t.pingTimeout) }, t.pingInterval) }, p.prototype.ping = function () { var t = this; this.sendPacket("ping", function () { t.emit("ping") }) }, p.prototype.onDrain = function () { this.writeBuffer.splice(0, this.prevBufferLen), (this.prevBufferLen = 0) === this.writeBuffer.length ? this.emit("drain") : this.flush() }, p.prototype.flush = function () { "closed" != this.readyState && this.transport.writable && !this.upgrading && this.writeBuffer.length && (u("flushing %d packets in socket", this.writeBuffer.length), this.transport.send(this.writeBuffer), this.prevBufferLen = this.writeBuffer.length, this.emit("flush")) }, p.prototype.write = p.prototype.send = function (t, e, n) { return this.sendPacket("message", t, e, n), this }, p.prototype.sendPacket = function (t, e, n, o) { if ("function" == typeof e && (o = e, e = void 0), "function" == typeof n && (o = n, n = null), "closing" != this.readyState && "closed" != this.readyState) { (n = n || {}).compress = !1 !== n.compress; var r = { type: t, data: e, options: n }; this.emit("packetCreate", r), this.writeBuffer.push(r), o && this.once("flush", o), this.flush() } }, p.prototype.close = function () { if ("opening" == this.readyState || "open" == this.readyState) { this.readyState = "closing"; var t = this; this.writeBuffer.length ? this.once("drain", function () { this.upgrading ? o() : e() }) : this.upgrading ? o() : e() } function e() { t.onClose("forced close"), u("socket closing - telling transport to close"), t.transport.close() } function n() { t.removeListener("upgrade", n), t.removeListener("upgradeError", n), e() } function o() { t.once("upgrade", n), t.once("upgradeError", n) } return this }, p.prototype.onError = function (t) { u("socket error %j", t), p.priorWebsocketSuccess = !1, this.emit("error", t), this.onClose("transport error", t) }, p.prototype.onClose = function (t, e) { if ("opening" == this.readyState || "open" == this.readyState || "closing" == this.readyState) { u('socket close with reason: "%s"', t); clearTimeout(this.pingIntervalTimer), clearTimeout(this.pingTimeoutTimer), this.transport.removeAllListeners("close"), this.transport.close(), this.transport.removeAllListeners(), this.readyState = "closed", this.id = null, this.emit("close", t, e), this.writeBuffer = [], this.prevBufferLen = 0 } }, p.prototype.filterUpgrades = function (t) { for (var e = [], n = 0, o = t.length; n < o; n++)~r(this.transports, t[n]) && e.push(t[n]); return e } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "./transport": 19, "./transports": 20, "component-emitter": 26, debug: 14, "engine.io-parser": 27, indexof: 32, parsejson: 36, parseqs: 37, parseuri: 38 }], 19: [function (t, e, n) { var o = t("engine.io-parser"); function r(t) { this.path = t.path, this.hostname = t.hostname, this.port = t.port, this.secure = t.secure, this.query = t.query, this.timestampParam = t.timestampParam, this.timestampRequests = t.timestampRequests, this.readyState = "", this.agent = t.agent || !1, this.socket = t.socket, this.enablesXDR = t.enablesXDR, this.pfx = t.pfx, this.key = t.key, this.passphrase = t.passphrase, this.cert = t.cert, this.ca = t.ca, this.ciphers = t.ciphers, this.rejectUnauthorized = t.rejectUnauthorized, this.extraHeaders = t.extraHeaders } t("component-emitter")((e.exports = r).prototype), r.prototype.onError = function (t, e) { var n = new Error(t); return n.type = "TransportError", n.description = e, this.emit("error", n), this }, r.prototype.open = function () { return "closed" != this.readyState && "" != this.readyState || (this.readyState = "opening", this.doOpen()), this }, r.prototype.close = function () { return "opening" != this.readyState && "open" != this.readyState || (this.doClose(), this.onClose()), this }, r.prototype.send = function (t) { if ("open" != this.readyState) throw new Error("Transport not open"); this.write(t) }, r.prototype.onOpen = function () { this.readyState = "open", this.writable = !0, this.emit("open") }, r.prototype.onData = function (t) { var e = o.decodePacket(t, this.socket.binaryType); this.onPacket(e) }, r.prototype.onPacket = function (t) { this.emit("packet", t) }, r.prototype.onClose = function () { this.readyState = "closed", this.emit("close") } }, { "component-emitter": 26, "engine.io-parser": 27 }], 20: [function (e, t, n) { (function (s) { var a = e("xmlhttprequest-ssl"), c = e("./polling-xhr"), l = e("./polling-jsonp"), t = e("./websocket"); n.polling = function (t) { var e = !1, n = !1, o = !1 !== t.jsonp; if (s.location) { var r = "https:" == location.protocol, i = location.port; i || (i = r ? 443 : 80), e = t.hostname != location.hostname || i != t.port, n = t.secure != r } { if (t.xdomain = e, t.xscheme = n, "open" in new a(t) && !t.forceJSONP) return new c(t); if (!o) throw new Error("JSONP disabled"); return new l(t) } }, n.websocket = t }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "./polling-jsonp": 21, "./polling-xhr": 22, "./websocket": 24, "xmlhttprequest-ssl": 25 }], 21: [function (s, a, t) { (function (n) { var o = s("./polling"), t = s("component-inherit"); a.exports = e; var r, l = /\n/g, h = /\\n/g; function i() { } function e(t) { o.call(this, t), this.query = this.query || {}, r || (n.___eio || (n.___eio = []), r = n.___eio), this.index = r.length; var e = this; r.push(function (t) { e.onData(t) }), this.query.j = this.index, n.document && n.addEventListener && n.addEventListener("beforeunload", function () { e.script && (e.script.onerror = i) }, !1) } t(e, o), e.prototype.supportsBinary = !1, e.prototype.doClose = function () { this.script && (this.script.parentNode.removeChild(this.script), this.script = null), this.form && (this.form.parentNode.removeChild(this.form), this.form = null, this.iframe = null), o.prototype.doClose.call(this) }, e.prototype.doPoll = function () { var e = this, t = document.createElement("script"); this.script && (this.script.parentNode.removeChild(this.script), this.script = null), t.async = !0, t.src = this.uri(), t.onerror = function (t) { e.onError("jsonp poll error", t) }; var n = document.getElementsByTagName("script")[0]; n ? n.parentNode.insertBefore(t, n) : (document.head || document.body).appendChild(t), this.script = t, "undefined" != typeof navigator && /gecko/i.test(navigator.userAgent) && setTimeout(function () { var t = document.createElement("iframe"); document.body.appendChild(t), document.body.removeChild(t) }, 100) }, e.prototype.doWrite = function (t, e) { var n = this; if (!this.form) { var o, r = document.createElement("form"), i = document.createElement("textarea"), s = this.iframeId = "eio_iframe_" + this.index; r.className = "socketio", r.style.position = "absolute", r.style.top = "-1000px", r.style.left = "-1000px", r.target = s, r.method = "POST", r.setAttribute("accept-charset", "utf-8"), i.name = "d", r.appendChild(i), document.body.appendChild(r), this.form = r, this.area = i } function a() { c(), e() } function c() { if (n.iframe) try { n.form.removeChild(n.iframe) } catch (t) { n.onError("jsonp polling iframe removal error", t) } try { var t = '<iframe src="javascript:0" name="' + n.iframeId + '">'; o = document.createElement(t) } catch (t) { (o = document.createElement("iframe")).name = n.iframeId, o.src = "javascript:0" } o.id = n.iframeId, n.form.appendChild(o), n.iframe = o } this.form.action = this.uri(), c(), t = t.replace(h, "\\\n"), this.area.value = t.replace(l, "\\n"); try { this.form.submit() } catch (t) { } this.iframe.attachEvent ? this.iframe.onreadystatechange = function () { "complete" == n.iframe.readyState && a() } : this.iframe.onload = a } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "./polling": 23, "component-inherit": 13 }], 22: [function (h, u, t) { (function (r) { var i = h("xmlhttprequest-ssl"), o = h("./polling"), t = h("component-emitter"), e = h("component-inherit"), s = h("debug")("engine.io-client:polling-xhr"); function n() { } function a(t) { if (o.call(this, t), r.location) { var e = "https:" == location.protocol, n = location.port; n || (n = e ? 443 : 80), this.xd = t.hostname != r.location.hostname || n != t.port, this.xs = t.secure != e } else this.extraHeaders = t.extraHeaders } function c(t) { this.method = t.method || "GET", this.uri = t.uri, this.xd = !!t.xd, this.xs = !!t.xs, this.async = !1 !== t.async, this.data = null != t.data ? t.data : null, this.agent = t.agent, this.isBinary = t.isBinary, this.supportsBinary = t.supportsBinary, this.enablesXDR = t.enablesXDR, this.pfx = t.pfx, this.key = t.key, this.passphrase = t.passphrase, this.cert = t.cert, this.ca = t.ca, this.ciphers = t.ciphers, this.rejectUnauthorized = t.rejectUnauthorized, this.extraHeaders = t.extraHeaders, this.create() } function l() { for (var t in c.requests) c.requests.hasOwnProperty(t) && c.requests[t].abort() } u.exports = a, u.exports.Request = c, e(a, o), a.prototype.supportsBinary = !0, a.prototype.request = function (t) { return (t = t || {}).uri = this.uri(), t.xd = this.xd, t.xs = this.xs, t.agent = this.agent || !1, t.supportsBinary = this.supportsBinary, t.enablesXDR = this.enablesXDR, t.pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized, t.extraHeaders = this.extraHeaders, new c(t) }, a.prototype.doWrite = function (t, e) { var n = "string" != typeof t && void 0 !== t, o = this.request({ method: "POST", data: t, isBinary: n }), r = this; o.on("success", e), o.on("error", function (t) { r.onError("xhr post error", t) }), this.sendXhr = o }, a.prototype.doPoll = function () { s("xhr poll"); var t = this.request(), e = this; t.on("data", function (t) { e.onData(t) }), t.on("error", function (t) { e.onError("xhr poll error", t) }), this.pollXhr = t }, t(c.prototype), c.prototype.create = function () { var t = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR }; t.pfx = this.pfx, t.key = this.key, t.passphrase = this.passphrase, t.cert = this.cert, t.ca = this.ca, t.ciphers = this.ciphers, t.rejectUnauthorized = this.rejectUnauthorized; var e = this.xhr = new i(t), n = this; try { s("xhr open %s: %s", this.method, this.uri), e.open(this.method, this.uri, this.async); try { if (this.extraHeaders) for (var o in e.setDisableHeaderCheck(!0), this.extraHeaders) this.extraHeaders.hasOwnProperty(o) && e.setRequestHeader(o, this.extraHeaders[o]) } catch (t) { } if (this.supportsBinary && (e.responseType = "arraybuffer"), "POST" == this.method) try { this.isBinary ? e.setRequestHeader("Content-type", "application/octet-stream") : e.setRequestHeader("Content-type", "text/plain;charset=UTF-8") } catch (t) { } "withCredentials" in e && (e.withCredentials = !0), this.hasXDR() ? (e.onload = function () { n.onLoad() }, e.onerror = function () { n.onError(e.responseText) }) : e.onreadystatechange = function () { 4 == e.readyState && (200 == e.status || 1223 == e.status ? n.onLoad() : setTimeout(function () { n.onError(e.status) }, 0)) }, s("xhr data %s", this.data), e.send(this.data) } catch (t) { return void setTimeout(function () { n.onError(t) }, 0) } r.document && (this.index = c.requestsCount++ , c.requests[this.index] = this) }, c.prototype.onSuccess = function () { this.emit("success"), this.cleanup() }, c.prototype.onData = function (t) { this.emit("data", t), this.onSuccess() }, c.prototype.onError = function (t) { this.emit("error", t), this.cleanup(!0) }, c.prototype.cleanup = function (t) { if (void 0 !== this.xhr && null !== this.xhr) { if (this.hasXDR() ? this.xhr.onload = this.xhr.onerror = n : this.xhr.onreadystatechange = n, t) try { this.xhr.abort() } catch (t) { } r.document && delete c.requests[this.index], this.xhr = null } }, c.prototype.onLoad = function () { var e; try { var t; try { t = this.xhr.getResponseHeader("Content-Type").split(";")[0] } catch (t) { } if ("application/octet-stream" === t) e = this.xhr.response; else if (this.supportsBinary) try { e = String.fromCharCode.apply(null, new Uint8Array(this.xhr.response)) } catch (t) { for (var n = new Uint8Array(this.xhr.response), o = [], r = 0, i = n.length; r < i; r++)o.push(n[r]); e = String.fromCharCode.apply(null, o) } else e = this.xhr.responseText } catch (t) { this.onError(t) } null != e && this.onData(e) }, c.prototype.hasXDR = function () { return void 0 !== r.XDomainRequest && !this.xs && this.enablesXDR }, c.prototype.abort = function () { this.cleanup() }, r.document && (c.requestsCount = 0, c.requests = {}, r.attachEvent ? r.attachEvent("onunload", l) : r.addEventListener && r.addEventListener("beforeunload", l, !1)) }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "./polling": 23, "component-emitter": 26, "component-inherit": 13, debug: 14, "xmlhttprequest-ssl": 25 }], 23: [function (t, e, n) { var o = t("../transport"), r = t("parseqs"), i = t("engine.io-parser"), s = t("component-inherit"), a = t("yeast"), c = t("debug")("engine.io-client:polling"); e.exports = h; var l = null != new (t("xmlhttprequest-ssl"))({ xdomain: !1 }).responseType; function h(t) { var e = t && t.forceBase64; l && !e || (this.supportsBinary = !1), o.call(this, t) } s(h, o), h.prototype.name = "polling", h.prototype.doOpen = function () { this.poll() }, h.prototype.pause = function (t) { var e = this; function n() { c("paused"), e.readyState = "paused", t() } if (this.readyState = "pausing", this.polling || !this.writable) { var o = 0; this.polling && (c("we are currently polling - waiting to pause"), o++ , this.once("pollComplete", function () { c("pre-pause polling complete"), --o || n() })), this.writable || (c("we are currently writing - waiting to pause"), o++ , this.once("drain", function () { c("pre-pause writing complete"), --o || n() })) } else n() }, h.prototype.poll = function () { c("polling"), this.polling = !0, this.doPoll(), this.emit("poll") }, h.prototype.onData = function (t) { var o = this; c("polling got data %s", t); i.decodePayload(t, this.socket.binaryType, function (t, e, n) { if ("opening" == o.readyState && o.onOpen(), "close" == t.type) return o.onClose(), !1; o.onPacket(t) }), "closed" != this.readyState && (this.polling = !1, this.emit("pollComplete"), "open" == this.readyState ? this.poll() : c('ignoring poll - transport state "%s"', this.readyState)) }, h.prototype.doClose = function () { var t = this; function e() { c("writing close packet"), t.write([{ type: "close" }]) } "open" == this.readyState ? (c("transport open - closing"), e()) : (c("transport not open - deferring close"), this.once("open", e)) }, h.prototype.write = function (t) { var e = this; this.writable = !1; var n = function () { e.writable = !0, e.emit("drain") }; e = this; i.encodePayload(t, this.supportsBinary, function (t) { e.doWrite(t, n) }) }, h.prototype.uri = function () { var t = this.query || {}, e = this.secure ? "https" : "http", n = ""; return !1 !== this.timestampRequests && (t[this.timestampParam] = a()), this.supportsBinary || t.sid || (t.b64 = 1), t = r.encode(t), this.port && ("https" == e && 443 != this.port || "http" == e && 80 != this.port) && (n = ":" + this.port), t.length && (t = "?" + t), e + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + t } }, { "../transport": 19, "component-inherit": 13, debug: 14, "engine.io-parser": 27, parseqs: 37, "xmlhttprequest-ssl": 25, yeast: 45 }], 24: [function (h, u, t) { (function (s) { var n = h("../transport"), a = h("engine.io-parser"), o = h("parseqs"), t = h("component-inherit"), r = h("yeast"), c = h("debug")("engine.io-client:websocket"), l = s.WebSocket || s.MozWebSocket, i = l; if (!i && "undefined" == typeof window) try { i = h("ws") } catch (t) { } function e(t) { t && t.forceBase64 && (this.supportsBinary = !1), this.perMessageDeflate = t.perMessageDeflate, n.call(this, t) } t(u.exports = e, n), e.prototype.name = "websocket", e.prototype.supportsBinary = !0, e.prototype.doOpen = function () { if (this.check()) { var t = this.uri(), e = { agent: this.agent, perMessageDeflate: this.perMessageDeflate }; e.pfx = this.pfx, e.key = this.key, e.passphrase = this.passphrase, e.cert = this.cert, e.ca = this.ca, e.ciphers = this.ciphers, e.rejectUnauthorized = this.rejectUnauthorized, this.extraHeaders && (e.headers = this.extraHeaders), this.ws = l ? new i(t) : new i(t, void 0, e), void 0 === this.ws.binaryType && (this.supportsBinary = !1), this.ws.supports && this.ws.supports.binary ? (this.supportsBinary = !0, this.ws.binaryType = "buffer") : this.ws.binaryType = "arraybuffer", this.addEventListeners() } }, e.prototype.addEventListeners = function () { var e = this; this.ws.onopen = function () { e.onOpen() }, this.ws.onclose = function () { e.onClose() }, this.ws.onmessage = function (t) { e.onData(t.data) }, this.ws.onerror = function (t) { e.onError("websocket error", t) } }, "undefined" != typeof navigator && /iPad|iPhone|iPod/i.test(navigator.userAgent) && (e.prototype.onData = function (t) { var e = this; setTimeout(function () { n.prototype.onData.call(e, t) }, 0) }), e.prototype.write = function (t) { var o = this; this.writable = !1; for (var r = t.length, e = 0, n = r; e < n; e++)(function (n) { a.encodePacket(n, o.supportsBinary, function (t) { if (!l) { var e = {}; if (n.options && (e.compress = n.options.compress), o.perMessageDeflate) ("string" == typeof t ? s.Buffer.byteLength(t) : t.length) < o.perMessageDeflate.threshold && (e.compress = !1) } try { l ? o.ws.send(t) : o.ws.send(t, e) } catch (t) { c("websocket closed before onclose event") } --r || i() }) })(t[e]); function i() { o.emit("flush"), setTimeout(function () { o.writable = !0, o.emit("drain") }, 0) } }, e.prototype.onClose = function () { n.prototype.onClose.call(this) }, e.prototype.doClose = function () { void 0 !== this.ws && this.ws.close() }, e.prototype.uri = function () { var t = this.query || {}, e = this.secure ? "wss" : "ws", n = ""; return this.port && ("wss" == e && 443 != this.port || "ws" == e && 80 != this.port) && (n = ":" + this.port), this.timestampRequests && (t[this.timestampParam] = r()), this.supportsBinary || (t.b64 = 1), (t = o.encode(t)).length && (t = "?" + t), e + "://" + (-1 !== this.hostname.indexOf(":") ? "[" + this.hostname + "]" : this.hostname) + n + this.path + t }, e.prototype.check = function () { return !(!i || "__initialize" in i && this.name === e.prototype.name) } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "../transport": 19, "component-inherit": 13, debug: 14, "engine.io-parser": 27, parseqs: 37, ws: void 0, yeast: 45 }], 25: [function (t, e, n) { var r = t("has-cors"); e.exports = function (t) { var e = t.xdomain, n = t.xscheme, o = t.enablesXDR; try { if ("undefined" != typeof XMLHttpRequest && (!e || r)) return new XMLHttpRequest } catch (t) { } try { if ("undefined" != typeof XDomainRequest && !n && o) return new XDomainRequest } catch (t) { } if (!e) try { return new ActiveXObject("Microsoft.XMLHTTP") } catch (t) { } } }, { "has-cors": 31 }], 26: [function (t, e, n) { function o(t) { if (t) return function (t) { for (var e in o.prototype) t[e] = o.prototype[e]; return t }(t) } (e.exports = o).prototype.on = o.prototype.addEventListener = function (t, e) { return this._callbacks = this._callbacks || {}, (this._callbacks[t] = this._callbacks[t] || []).push(e), this }, o.prototype.once = function (t, e) { var n = this; function o() { n.off(t, o), e.apply(this, arguments) } return this._callbacks = this._callbacks || {}, o.fn = e, this.on(t, o), this }, o.prototype.off = o.prototype.removeListener = o.prototype.removeAllListeners = o.prototype.removeEventListener = function (t, e) { if (this._callbacks = this._callbacks || {}, 0 == arguments.length) return this._callbacks = {}, this; var n, o = this._callbacks[t]; if (!o) return this; if (1 == arguments.length) return delete this._callbacks[t], this; for (var r = 0; r < o.length; r++)if ((n = o[r]) === e || n.fn === e) { o.splice(r, 1); break } return this }, o.prototype.emit = function (t) { this._callbacks = this._callbacks || {}; var e = [].slice.call(arguments, 1), n = this._callbacks[t]; if (n) for (var o = 0, r = (n = n.slice(0)).length; o < r; ++o)n[o].apply(this, e); return this }, o.prototype.listeners = function (t) { return this._callbacks = this._callbacks || {}, this._callbacks[t] || [] }, o.prototype.hasListeners = function (t) { return !!this.listeners(t).length } }, {}], 27: [function (o, t, y) { (function (l) { var t = o("./keys"), r = o("has-binary"), f = o("arraybuffer.slice"), i = o("base64-arraybuffer"), a = o("after"), h = o("utf8"), e = navigator.userAgent.match(/Android/i), n = /PhantomJS/i.test(navigator.userAgent), u = e || n; y.protocol = 3; var p = y.packets = { open: 0, close: 1, ping: 2, pong: 3, message: 4, upgrade: 5, noop: 6 }, s = t(p), d = { type: "error", data: "parser error" }, g = o("blob"); function c(t, e, n) { for (var r = new Array(t.length), o = a(t.length, n), i = function (n, t, o) { e(t, function (t, e) { r[n] = e, o(t, r) }) }, s = 0; s < t.length; s++)i(s, t[s], o) } y.encodePacket = function (t, e, n, o) { "function" == typeof e && (o = e, e = !1), "function" == typeof n && (o = n, n = null); var r, i, s, a = void 0 === t.data ? void 0 : t.data.buffer || t.data; if (l.ArrayBuffer && a instanceof ArrayBuffer) return function (t, e, n) { if (!e) return y.encodeBase64Packet(t, n); var o = t.data, r = new Uint8Array(o), i = new Uint8Array(1 + o.byteLength); i[0] = p[t.type]; for (var s = 0; s < r.length; s++)i[s + 1] = r[s]; return n(i.buffer) }(t, e, o); if (g && a instanceof l.Blob) return function (t, e, n) { if (!e) return y.encodeBase64Packet(t, n); if (u) return function (t, e, n) { if (!e) return y.encodeBase64Packet(t, n); var o = new FileReader; return o.onload = function () { t.data = o.result, y.encodePacket(t, e, !0, n) }, o.readAsArrayBuffer(t.data) }(t, e, n); var o = new Uint8Array(1); o[0] = p[t.type]; var r = new g([o.buffer, t.data]); return n(r) }(t, e, o); if (a && a.base64) return r = t, i = o, s = "b" + y.packets[r.type] + r.data.data, i(s); var c = p[t.type]; return void 0 !== t.data && (c += n ? h.encode(String(t.data)) : String(t.data)), o("" + c) }, y.encodeBase64Packet = function (e, n) { var o, r = "b" + y.packets[e.type]; if (g && e.data instanceof l.Blob) { var i = new FileReader; return i.onload = function () { var t = i.result.split(",")[1]; n(r + t) }, i.readAsDataURL(e.data) } try { o = String.fromCharCode.apply(null, new Uint8Array(e.data)) } catch (t) { for (var s = new Uint8Array(e.data), a = new Array(s.length), c = 0; c < s.length; c++)a[c] = s[c]; o = String.fromCharCode.apply(null, a) } return r += l.btoa(o), n(r) }, y.decodePacket = function (t, e, n) { if ("string" == typeof t || void 0 === t) { if ("b" == t.charAt(0)) return y.decodeBase64Packet(t.substr(1), e); if (n) try { t = h.decode(t) } catch (t) { return d } var o = t.charAt(0); return Number(o) == o && s[o] ? 1 < t.length ? { type: s[o], data: t.substring(1) } : { type: s[o] } : d } o = new Uint8Array(t)[0]; var r = f(t, 1); return g && "blob" === e && (r = new g([r])), { type: s[o], data: r } }, y.decodeBase64Packet = function (t, e) { var n = s[t.charAt(0)]; if (!l.ArrayBuffer) return { type: n, data: { base64: !0, data: t.substr(1) } }; var o = i.decode(t.substr(1)); return "blob" === e && g && (o = new g([o])), { type: n, data: o } }, y.encodePayload = function (t, e, n) { "function" == typeof e && (n = e, e = null); var o = r(t); if (e && o) return g && !u ? y.encodePayloadAsBlob(t, n) : y.encodePayloadAsArrayBuffer(t, n); if (!t.length) return n("0:"); c(t, function (t, n) { y.encodePacket(t, !!o && e, !0, function (t) { var e; n(null, (e = t).length + ":" + e) }) }, function (t, e) { return n(e.join("")) }) }, y.decodePayload = function (t, e, n) { if ("string" != typeof t) return y.decodePayloadAsBinary(t, e, n); var o; if ("function" == typeof e && (n = e, e = null), "" == t) return n(d, 0, 1); for (var r, i, s = "", a = 0, c = t.length; a < c; a++) { var l = t.charAt(a); if (":" != l) s += l; else { if ("" == s || s != (r = Number(s))) return n(d, 0, 1); if (s != (i = t.substr(a + 1, r)).length) return n(d, 0, 1); if (i.length) { if (o = y.decodePacket(i, e, !0), d.type == o.type && d.data == o.data) return n(d, 0, 1); if (!1 === n(o, a + r, c)) return } a += r, s = "" } } return "" != s ? n(d, 0, 1) : void 0 }, y.encodePayloadAsArrayBuffer = function (t, o) { if (!t.length) return o(new ArrayBuffer(0)); c(t, function (t, e) { y.encodePacket(t, !0, !0, function (t) { return e(null, t) }) }, function (t, e) { var n = e.reduce(function (t, e) { var n; return t + (n = "string" == typeof e ? e.length : e.byteLength).toString().length + n + 2 }, 0), s = new Uint8Array(n), a = 0; return e.forEach(function (t) { var e = "string" == typeof t, n = t; if (e) { for (var o = new Uint8Array(t.length), r = 0; r < t.length; r++)o[r] = t.charCodeAt(r); n = o.buffer } s[a++] = e ? 0 : 1; var i = n.byteLength.toString(); for (r = 0; r < i.length; r++)s[a++] = parseInt(i[r]); s[a++] = 255; for (o = new Uint8Array(n), r = 0; r < o.length; r++)s[a++] = o[r] }), o(s.buffer) }) }, y.encodePayloadAsBlob = function (t, n) { c(t, function (t, a) { y.encodePacket(t, !0, !0, function (t) { var e = new Uint8Array(1); if (e[0] = 1, "string" == typeof t) { for (var n = new Uint8Array(t.length), o = 0; o < t.length; o++)n[o] = t.charCodeAt(o); t = n.buffer, e[0] = 0 } var r = (t instanceof ArrayBuffer ? t.byteLength : t.size).toString(), i = new Uint8Array(r.length + 1); for (o = 0; o < r.length; o++)i[o] = parseInt(r[o]); if (i[r.length] = 255, g) { var s = new g([e.buffer, i.buffer, t]); a(null, s) } }) }, function (t, e) { return n(new g(e)) }) }, y.decodePayloadAsBinary = function (t, n, o) { "function" == typeof n && (o = n, n = null); for (var e = t, r = [], i = !1; 0 < e.byteLength;) { for (var s = new Uint8Array(e), a = 0 === s[0], c = "", l = 1; 255 != s[l]; l++) { if (310 < c.length) { i = !0; break } c += s[l] } if (i) return o(d, 0, 1); e = f(e, 2 + c.length), c = parseInt(c); var h = f(e, 0, c); if (a) try { h = String.fromCharCode.apply(null, new Uint8Array(h)) } catch (t) { var u = new Uint8Array(h); h = ""; for (l = 0; l < u.length; l++)h += String.fromCharCode(u[l]) } r.push(h), e = f(e, c) } var p = r.length; r.forEach(function (t, e) { o(y.decodePacket(t, n, !0), e, p) }) } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "./keys": 28, after: 6, "arraybuffer.slice": 7, "base64-arraybuffer": 9, blob: 10, "has-binary": 29, utf8: 44 }], 28: [function (t, e, n) { e.exports = Object.keys || function (t) { var e = [], n = Object.prototype.hasOwnProperty; for (var o in t) n.call(t, o) && e.push(o); return e } }, {}], 29: [function (t, e, n) { (function (r) { var i = t("isarray"); e.exports = function (t) { return function t(e) { if (!e) return !1; if (r.Buffer && r.Buffer.isBuffer(e) || r.ArrayBuffer && e instanceof ArrayBuffer || r.Blob && e instanceof Blob || r.File && e instanceof File) return !0; if (i(e)) { for (var n = 0; n < e.length; n++)if (t(e[n])) return !0 } else if (e && "object" == (void 0 === e ? "undefined" : M(e))) for (var o in e.toJSON && (e = e.toJSON()), e) if (Object.prototype.hasOwnProperty.call(e, o) && t(e[o])) return !0; return !1 }(t) } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { isarray: 33 }], 30: [function (t, e, n) { (function (r) { var i = t("isarray"); e.exports = function (t) { return function t(e) { if (!e) return !1; if (r.Buffer && r.Buffer.isBuffer && r.Buffer.isBuffer(e) || r.ArrayBuffer && e instanceof ArrayBuffer || r.Blob && e instanceof Blob || r.File && e instanceof File) return !0; if (i(e)) { for (var n = 0; n < e.length; n++)if (t(e[n])) return !0 } else if (e && "object" == (void 0 === e ? "undefined" : M(e))) for (var o in e.toJSON && "function" == typeof e.toJSON && (e = e.toJSON()), e) if (Object.prototype.hasOwnProperty.call(e, o) && t(e[o])) return !0; return !1 }(t) } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { isarray: 33 }], 31: [function (t, e, n) { try { e.exports = "undefined" != typeof XMLHttpRequest && "withCredentials" in new XMLHttpRequest } catch (t) { e.exports = !1 } }, {}], 32: [function (t, e, n) { var o = [].indexOf; e.exports = function (t, e) { if (o) return t.indexOf(e); for (var n = 0; n < t.length; ++n)if (t[n] === e) return n; return -1 } }, {}], 33: [function (t, e, n) { e.exports = Array.isArray || function (t) { return "[object Array]" == Object.prototype.toString.call(t) } }, {}], 34: [function (t, a, c) { (function (s) { (function () { var j = { function: !0, object: !0 }, t = j[void 0 === c ? "undefined" : M(c)] && c && !c.nodeType && c, O = j["undefined" == typeof window ? "undefined" : M(window)] && window || this, e = t && j[void 0 === a ? "undefined" : M(a)] && a && !a.nodeType && "object" == (void 0 === s ? "undefined" : M(s)) && s; function F(t, c) { t || (t = O.Object()), c || (c = O.Object()); var l = t.Number || O.Number, h = t.String || O.String, e = t.Object || O.Object, u = t.Date || O.Date, n = t.SyntaxError || O.SyntaxError, C = t.TypeError || O.TypeError, o = t.Math || O.Math, r = t.JSON || O.JSON; "object" == (void 0 === r ? "undefined" : M(r)) && r && (c.stringify = r.stringify, c.parse = r.parse); var x, P, B, i = e.prototype, D = i.toString, p = new u(-0xc782b5b800cec); try { p = -109252 == p.getUTCFullYear() && 0 === p.getUTCMonth() && 1 === p.getUTCDate() && 10 == p.getUTCHours() && 37 == p.getUTCMinutes() && 6 == p.getUTCSeconds() && 708 == p.getUTCMilliseconds() } catch (t) { } function f(t) { if (f[t] !== B) return f[t]; var e; if ("bug-string-char-index" == t) e = "a" != "a"[0]; else if ("json" == t) e = f("json-stringify") && f("json-parse"); else { var n, o = '{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}'; if ("json-stringify" == t) { var r = c.stringify, i = "function" == typeof r && p; if (i) { (n = function () { return 1 }).toJSON = n; try { i = "0" === r(0) && "0" === r(new l) && '""' == r(new h) && r(D) === B && r(B) === B && r() === B && "1" === r(n) && "[1]" == r([n]) && "[null]" == r([B]) && "null" == r(null) && "[null,null,null]" == r([B, D, null]) && r({ a: [n, !0, !1, null, "\0\b\n\f\r\t"] }) == o && "1" === r(null, n) && "[\n 1,\n 2\n]" == r([1, 2], null, 1) && '"-271821-04-20T00:00:00.000Z"' == r(new u(-864e13)) && '"+275760-09-13T00:00:00.000Z"' == r(new u(864e13)) && '"-000001-01-01T00:00:00.000Z"' == r(new u(-621987552e5)) && '"1969-12-31T23:59:59.999Z"' == r(new u(-1)) } catch (t) { i = !1 } } e = i } if ("json-parse" == t) { var s = c.parse; if ("function" == typeof s) try { if (0 === s("0") && !s(!1)) { var a = 5 == (n = s(o)).a.length && 1 === n.a[0]; if (a) { try { a = !s('"\t"') } catch (t) { } if (a) try { a = 1 !== s("01") } catch (t) { } if (a) try { a = 1 !== s("1.") } catch (t) { } } } } catch (t) { a = !1 } e = a } } return f[t] = !!e } if (!f("json")) { var d = "[object Function]", L = "[object Number]", _ = "[object String]", R = "[object Array]", a = f("bug-string-char-index"); if (!p) var N = o.floor, s = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334], I = function (t, e) { return s[e] + 365 * (t - 1970) + N((t - 1969 + (e = +(1 < e))) / 4) - N((t - 1901 + e) / 100) + N((t - 1601 + e) / 400) }; if ((x = i.hasOwnProperty) || (x = function (t) { var n, e = {}; return (e.__proto__ = null, e.__proto__ = { toString: 1 }, e).toString != D ? x = function (t) { var e = this.__proto__, n = t in (this.__proto__ = null, this); return this.__proto__ = e, n } : (n = e.constructor, x = function (t) { var e = (this.constructor || n).prototype; return t in this && !(t in e && this[t] === e[t]) }), e = null, x.call(this, t) }), P = function (t, e) { var n, s, o, r = 0; for (o in (n = function () { this.valueOf = 0 }).prototype.valueOf = 0, s = new n) x.call(s, o) && r++; return n = s = null, r ? P = 2 == r ? function (t, e) { var n, o = {}, r = D.call(t) == d; for (n in t) r && "prototype" == n || x.call(o, n) || !(o[n] = 1) || !x.call(t, n) || e(n) } : function (t, e) { var n, o, r = D.call(t) == d; for (n in t) r && "prototype" == n || !x.call(t, n) || (o = "constructor" === n) || e(n); (o || x.call(t, n = "constructor")) && e(n) } : (s = ["valueOf", "toString", "toLocaleString", "propertyIsEnumerable", "isPrototypeOf", "hasOwnProperty", "constructor"], P = function (t, e) { var n, o, r = D.call(t) == d, i = !r && "function" != typeof t.constructor && j[M(t.hasOwnProperty)] && t.hasOwnProperty || x; for (n in t) r && "prototype" == n || !i.call(t, n) || e(n); for (o = s.length; n = s[--o]; i.call(t, n) && e(n)); }), P(t, e) }, !f("json-stringify")) { var g = { 92: "\\\\", 34: '\\"', 8: "\\b", 12: "\\f", 10: "\\n", 13: "\\r", 9: "\\t" }, T = function (t, e) { return ("000000" + (e || 0)).slice(-t) }, E = function (t) { for (var e = '"', n = 0, o = t.length, r = !a || 10 < o, i = r && (a ? t.split("") : t); n < o; n++) { var s = t.charCodeAt(n); switch (s) { case 8: case 9: case 10: case 12: case 13: case 34: case 92: e += g[s]; break; default: if (s < 32) { e += "\\u00" + T(2, s.toString(16)); break } e += r ? i[n] : t.charAt(n) } } return e + '"' }; c.stringify = function (t, e, n) { var o, r, i, s; if (j[void 0 === e ? "undefined" : M(e)] && e) if ((s = D.call(e)) == d) r = e; else if (s == R) { i = {}; for (var a, c = 0, l = e.length; c < l; a = e[c++], ((s = D.call(a)) == _ || s == L) && (i[a] = 1)); } if (n) if ((s = D.call(n)) == L) { if (0 < (n -= n % 1)) for (o = "", 10 < n && (n = 10); o.length < n; o += " "); } else s == _ && (o = n.length <= 10 ? n : n.slice(0, 10)); return function n(t, e, o, r, i, s, a) { var c, l, h, u, p, f, d, g, y, m, b, v, w, k, S, A; try { c = e[t] } catch (t) { } if ("object" == (void 0 === c ? "undefined" : M(c)) && c) if ("[object Date]" != (l = D.call(c)) || x.call(c, "toJSON")) "function" == typeof c.toJSON && (l != L && l != _ && l != R || x.call(c, "toJSON")) && (c = c.toJSON(t)); else if (-1 / 0 < c && c < 1 / 0) { if (I) { for (p = N(c / 864e5), h = N(p / 365.2425) + 1970 - 1; I(h + 1, 0) <= p; h++); for (u = N((p - I(h, 0)) / 30.42); I(h, u + 1) <= p; u++); p = 1 + p - I(h, u), d = N((f = (c % 864e5 + 864e5) % 864e5) / 36e5) % 24, g = N(f / 6e4) % 60, y = N(f / 1e3) % 60, m = f % 1e3 } else h = c.getUTCFullYear(), u = c.getUTCMonth(), p = c.getUTCDate(), d = c.getUTCHours(), g = c.getUTCMinutes(), y = c.getUTCSeconds(), m = c.getUTCMilliseconds(); c = (h <= 0 || 1e4 <= h ? (h < 0 ? "-" : "+") + T(6, h < 0 ? -h : h) : T(4, h)) + "-" + T(2, u + 1) + "-" + T(2, p) + "T" + T(2, d) + ":" + T(2, g) + ":" + T(2, y) + "." + T(3, m) + "Z" } else c = null; if (o && (c = o.call(e, t, c)), null === c) return "null"; if ("[object Boolean]" == (l = D.call(c))) return "" + c; if (l == L) return -1 / 0 < c && c < 1 / 0 ? "" + c : "null"; if (l == _) return E("" + c); if ("object" == (void 0 === c ? "undefined" : M(c))) { for (k = a.length; k--;)if (a[k] === c) throw C(); if (a.push(c), b = [], S = s, s += i, l == R) { for (w = 0, k = c.length; w < k; w++)v = n(w, c, o, r, i, s, a), b.push(v === B ? "null" : v); A = b.length ? i ? "[\n" + s + b.join(",\n" + s) + "\n" + S + "]" : "[" + b.join(",") + "]" : "[]" } else P(r || c, function (t) { var e = n(t, c, o, r, i, s, a); e !== B && b.push(E(t) + ":" + (i ? " " : "") + e) }), A = b.length ? i ? "{\n" + s + b.join(",\n" + s) + "\n" + S + "}" : "{" + b.join(",") + "}" : "{}"; return a.pop(), A } }("", ((a = {})[""] = t, a), r, i, o, "", []) } } if (!f("json-parse")) { var y, m, b = h.fromCharCode, v = { 92: "\\", 34: '"', 47: "/", 98: "\b", 116: "\t", 110: "\n", 102: "\f", 114: "\r" }, w = function () { throw y = m = null, n() }, k = function () { for (var t, e, n, o, r, i = m, s = i.length; y < s;)switch (r = i.charCodeAt(y)) { case 9: case 10: case 13: case 32: y++; break; case 123: case 125: case 91: case 93: case 58: case 44: return t = a ? i.charAt(y) : i[y], y++ , t; case 34: for (t = "@", y++; y < s;)if ((r = i.charCodeAt(y)) < 32) w(); else if (92 == r) switch (r = i.charCodeAt(++y)) { case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114: t += v[r], y++; break; case 117: for (e = ++y, n = y + 4; y < n; y++)48 <= (r = i.charCodeAt(y)) && r <= 57 || 97 <= r && r <= 102 || 65 <= r && r <= 70 || w(); t += b("0x" + i.slice(e, y)); break; default: w() } else { if (34 == r) break; for (r = i.charCodeAt(y), e = y; 32 <= r && 92 != r && 34 != r;)r = i.charCodeAt(++y); t += i.slice(e, y) } if (34 == i.charCodeAt(y)) return y++ , t; w(); default: if (e = y, 45 == r && (o = !0, r = i.charCodeAt(++y)), 48 <= r && r <= 57) { for (48 == r && (48 <= (r = i.charCodeAt(y + 1)) && r <= 57) && w(), o = !1; y < s && (48 <= (r = i.charCodeAt(y)) && r <= 57); y++); if (46 == i.charCodeAt(y)) { for (n = ++y; n < s && (48 <= (r = i.charCodeAt(n)) && r <= 57); n++); n == y && w(), y = n } if (101 == (r = i.charCodeAt(y)) || 69 == r) { for (43 != (r = i.charCodeAt(++y)) && 45 != r || y++ , n = y; n < s && (48 <= (r = i.charCodeAt(n)) && r <= 57); n++); n == y && w(), y = n } return +i.slice(e, y) } if (o && w(), "true" == i.slice(y, y + 4)) return y += 4, !0; if ("false" == i.slice(y, y + 5)) return y += 5, !1; if ("null" == i.slice(y, y + 4)) return y += 4, null; w() }return "$" }, S = function (t, e, n) { var o = A(t, e, n); o === B ? delete t[e] : t[e] = o }, A = function (t, e, n) { var o, r = t[e]; if ("object" == (void 0 === r ? "undefined" : M(r)) && r) if (D.call(r) == R) for (o = r.length; o--;)S(r, o, n); else P(r, function (t) { S(r, t, n) }); return n.call(t, e, r) }; c.parse = function (t, e) { var n, o; return y = 0, m = "" + t, n = function t(e) { var n, o; if ("$" == e && w(), "string" == typeof e) { if ("@" == (a ? e.charAt(0) : e[0])) return e.slice(1); if ("[" == e) { for (n = []; "]" != (e = k()); o || (o = !0))o && ("," == e ? "]" == (e = k()) && w() : w()), "," == e && w(), n.push(t(e)); return n } if ("{" == e) { for (n = {}; "}" != (e = k()); o || (o = !0))o && ("," == e ? "}" == (e = k()) && w() : w()), "," != e && "string" == typeof e && "@" == (a ? e.charAt(0) : e[0]) && ":" == k() || w(), n[e.slice(1)] = t(k()); return n } w() } return e }(k()), "$" != k() && w(), y = m = null, e && D.call(e) == d ? A(((o = {})[""] = n, o), "", e) : n } } } return c.runInContext = F, c } if (!e || e.global !== e && e.window !== e && e.self !== e || (O = e), t) F(O, t); else { var n = O.JSON, o = O.JSON3, r = !1, i = F(O, O.JSON3 = { noConflict: function () { return r || (r = !0, O.JSON = n, O.JSON3 = o, n = o = null), i } }); O.JSON = { parse: i.parse, stringify: i.stringify } } }).call(this) }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, {}], 35: [function (t, e, n) { var r = 1e3, i = 60 * r, s = 60 * i, a = 24 * s, c = 365.25 * a; function l(t, e, n) { if (!(t < e)) return t < 1.5 * e ? Math.floor(t / e) + " " + n : Math.ceil(t / e) + " " + n + "s" } e.exports = function (t, e) { return e = e || {}, "string" == typeof t ? function (t) { if (1e4 < (t = "" + t).length) return; var e = /^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t); if (!e) return; var n = parseFloat(e[1]); switch ((e[2] || "ms").toLowerCase()) { case "years": case "year": case "yrs": case "yr": case "y": return n * c; case "days": case "day": case "d": return n * a; case "hours": case "hour": case "hrs": case "hr": case "h": return n * s; case "minutes": case "minute": case "mins": case "min": case "m": return n * i; case "seconds": case "second": case "secs": case "sec": case "s": return n * r; case "milliseconds": case "millisecond": case "msecs": case "msec": case "ms": return n } }(t) : e.long ? l(o = t, a, "day") || l(o, s, "hour") || l(o, i, "minute") || l(o, r, "second") || o + " ms" : a <= (n = t) ? Math.round(n / a) + "d" : s <= n ? Math.round(n / s) + "h" : i <= n ? Math.round(n / i) + "m" : r <= n ? Math.round(n / r) + "s" : n + "ms"; var n, o } }, {}], 36: [function (t, c, e) { (function (e) { var n = /^[\],:{}\s]*$/, o = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g, r = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g, i = /(?:^|:|,)(?:\s*\[)+/g, s = /^\s+/, a = /\s+$/; c.exports = function (t) { return "string" == typeof t && t ? (t = t.replace(s, "").replace(a, ""), e.JSON && JSON.parse ? JSON.parse(t) : n.test(t.replace(o, "@").replace(r, "]").replace(i, "")) ? new Function("return " + t)() : void 0) : null } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, {}], 37: [function (t, e, n) { n.encode = function (t) { var e = ""; for (var n in t) t.hasOwnProperty(n) && (e.length && (e += "&"), e += encodeURIComponent(n) + "=" + encodeURIComponent(t[n])); return e }, n.decode = function (t) { for (var e = {}, n = t.split("&"), o = 0, r = n.length; o < r; o++) { var i = n[o].split("="); e[decodeURIComponent(i[0])] = decodeURIComponent(i[1]) } return e } }, {}], 38: [function (t, e, n) { var a = /^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/, c = ["source", "protocol", "authority", "userInfo", "user", "password", "host", "port", "relative", "path", "directory", "file", "query", "anchor"]; e.exports = function (t) { var e = t, n = t.indexOf("["), o = t.indexOf("]"); -1 != n && -1 != o && (t = t.substring(0, n) + t.substring(n, o).replace(/:/g, ";") + t.substring(o, t.length)); for (var r = a.exec(t || ""), i = {}, s = 14; s--;)i[c[s]] = r[s] || ""; return -1 != n && -1 != o && (i.source = e, i.host = i.host.substring(1, i.host.length - 1).replace(/;/g, ":"), i.authority = i.authority.replace("[", "").replace("]", "").replace(/;/g, ":"), i.ipv6uri = !0), i } }, {}], 39: [function (t, e, n) { (function (h) { var u = t("isarray"), p = t("./is-buffer"); n.deconstructPacket = function (t) { var s = [], e = t.data; var n = t; return n.data = function t(e) { if (!e) return e; if (p(e)) { var n = { _placeholder: !0, num: s.length }; return s.push(e), n } if (u(e)) { for (var o = new Array(e.length), r = 0; r < e.length; r++)o[r] = t(e[r]); return o } if ("object" == (void 0 === e ? "undefined" : M(e)) && !(e instanceof Date)) { for (var i in o = {}, e) o[i] = t(e[i]); return o } return e }(e), n.attachments = s.length, { packet: n, buffers: s } }, n.reconstructPacket = function (t, r) { return t.data = function t(e) { if (e && e._placeholder) return r[e.num]; if (u(e)) { for (var n = 0; n < e.length; n++)e[n] = t(e[n]); return e } if (e && "object" == (void 0 === e ? "undefined" : M(e))) { for (var o in e) e[o] = t(e[o]); return e } return e }(t.data), t.attachments = void 0, t }, n.removeBlobs = function (t, a) { var c = 0, l = t; (function t(e, n, o) { if (!e) return e; if (h.Blob && e instanceof Blob || h.File && e instanceof File) { c++; var r = new FileReader; r.onload = function () { o ? o[n] = this.result : l = this.result, --c || a(l) }, r.readAsArrayBuffer(e) } else if (u(e)) for (var i = 0; i < e.length; i++)t(e[i], i, e); else if (e && "object" == (void 0 === e ? "undefined" : M(e)) && !p(e)) for (var s in e) t(e[s], s, e) })(l), c || a(l) } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, { "./is-buffer": 41, isarray: 33 }], 40: [function (t, e, s) { var a = t("debug")("socket.io-parser"), c = t("json3"), n = (t("isarray"), t("component-emitter")), i = t("./binary"), o = t("./is-buffer"); function r() { } function l(t) { var e = "", n = !1; return e += t.type, s.BINARY_EVENT != t.type && s.BINARY_ACK != t.type || (e += t.attachments, e += "-"), t.nsp && "/" != t.nsp && (n = !0, e += t.nsp), null != t.id && (n && (e += ",", n = !1), e += t.id), null != t.data && (n && (e += ","), e += c.stringify(t.data)), a("encoded %j as %s", t, e), e } function h() { this.reconstructor = null } function u(t) { this.reconPack = t, this.buffers = [] } function p(t) { return { type: s.ERROR, data: "parser error" } } s.protocol = 4, s.types = ["CONNECT", "DISCONNECT", "EVENT", "ACK", "ERROR", "BINARY_EVENT", "BINARY_ACK"], s.CONNECT = 0, s.DISCONNECT = 1, s.EVENT = 2, s.ACK = 3, s.ERROR = 4, s.BINARY_EVENT = 5, s.BINARY_ACK = 6, s.Encoder = r, s.Decoder = h, r.prototype.encode = function (t, e) { var n, r; (a("encoding packet %j", t), s.BINARY_EVENT == t.type || s.BINARY_ACK == t.type) ? (n = t, r = e, i.removeBlobs(n, function (t) { var e = i.deconstructPacket(t), n = l(e.packet), o = e.buffers; o.unshift(n), r(o) })) : e([l(t)]) }, n(h.prototype), h.prototype.add = function (t) { var e; if ("string" == typeof t) e = function (t) { var e = {}, n = 0; if (e.type = Number(t.charAt(0)), null == s.types[e.type]) return p(); if (s.BINARY_EVENT == e.type || s.BINARY_ACK == e.type) { for (var o = ""; "-" != t.charAt(++n) && (o += t.charAt(n), n != t.length);); if (o != Number(o) || "-" != t.charAt(n)) throw new Error("Illegal attachments"); e.attachments = Number(o) } if ("/" == t.charAt(n + 1)) for (e.nsp = ""; ++n;) { var r = t.charAt(n); if ("," == r) break; if (e.nsp += r, n == t.length) break } else e.nsp = "/"; var i = t.charAt(n + 1); if ("" !== i && Number(i) == i) { for (e.id = ""; ++n;) { var r = t.charAt(n); if (null == r || Number(r) != r) { --n; break } if (e.id += t.charAt(n), n == t.length) break } e.id = Number(e.id) } if (t.charAt(++n)) try { e.data = c.parse(t.substr(n)) } catch (t) { return p() } return a("decoded %s as %j", t, e), e }(t), s.BINARY_EVENT == e.type || s.BINARY_ACK == e.type ? (this.reconstructor = new u(e), 0 === this.reconstructor.reconPack.attachments && this.emit("decoded", e)) : this.emit("decoded", e); else { if (!o(t) && !t.base64) throw new Error("Unknown type: " + t); if (!this.reconstructor) throw new Error("got binary data when not reconstructing a packet"); (e = this.reconstructor.takeBinaryData(t)) && (this.reconstructor = null, this.emit("decoded", e)) } }, h.prototype.destroy = function () { this.reconstructor && this.reconstructor.finishedReconstruction() }, u.prototype.takeBinaryData = function (t) { if (this.buffers.push(t), this.buffers.length == this.reconPack.attachments) { var e = i.reconstructPacket(this.reconPack, this.buffers); return this.finishedReconstruction(), e } return null }, u.prototype.finishedReconstruction = function () { this.reconPack = null, this.buffers = [] } }, { "./binary": 39, "./is-buffer": 41, "component-emitter": 42, debug: 14, isarray: 33, json3: 34 }], 41: [function (t, n, e) { (function (e) { n.exports = function (t) { return e.Buffer && e.Buffer.isBuffer(t) || e.ArrayBuffer && t instanceof ArrayBuffer } }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, {}], 42: [function (t, e, n) { arguments[4][26][0].apply(n, arguments) }, { dup: 26 }], 43: [function (t, e, n) { e.exports = function (t, e) { for (var n = [], o = (e = e || 0) || 0; o < t.length; o++)n[o - e] = t[o]; return n } }, {}], 44: [function (t, b, v) { (function (m) { (function (t) { var e = "object" == (void 0 === v ? "undefined" : M(v)) && v, n = "object" == (void 0 === b ? "undefined" : M(b)) && b && b.exports == e && b, o = "object" == (void 0 === m ? "undefined" : M(m)) && m; o.global !== o && o.window !== o || (t = o); var r, i, s, a = String.fromCharCode; function c(t) { for (var e, n, o = [], r = 0, i = t.length; r < i;)55296 <= (e = t.charCodeAt(r++)) && e <= 56319 && r < i ? 56320 == (64512 & (n = t.charCodeAt(r++))) ? o.push(((1023 & e) << 10) + (1023 & n) + 65536) : (o.push(e), r--) : o.push(e); return o } function l(t) { if (55296 <= t && t <= 57343) throw Error("Lone surrogate U+" + t.toString(16).toUpperCase() + " is not a scalar value") } function h(t, e) { return a(t >> e & 63 | 128) } function u(t) { if (0 == (4294967168 & t)) return a(t); var e = ""; return 0 == (4294965248 & t) ? e = a(t >> 6 & 31 | 192) : 0 == (4294901760 & t) ? (l(t), e = a(t >> 12 & 15 | 224), e += h(t, 6)) : 0 == (4292870144 & t) && (e = a(t >> 18 & 7 | 240), e += h(t, 12), e += h(t, 6)), e += a(63 & t | 128) } function p() { if (i <= s) throw Error("Invalid byte index"); var t = 255 & r[s]; if (s++ , 128 == (192 & t)) return 63 & t; throw Error("Invalid continuation byte") } function f() { var t, e; if (i < s) throw Error("Invalid byte index"); if (s == i) return !1; if (t = 255 & r[s], s++ , 0 == (128 & t)) return t; if (192 == (224 & t)) { if (128 <= (e = (31 & t) << 6 | p())) return e; throw Error("Invalid continuation byte") } if (224 == (240 & t)) { if (2048 <= (e = (15 & t) << 12 | p() << 6 | p())) return l(e), e; throw Error("Invalid continuation byte") } if (240 == (248 & t) && 65536 <= (e = (15 & t) << 18 | p() << 12 | p() << 6 | p()) && e <= 1114111) return e; throw Error("Invalid UTF-8 detected") } var d = { version: "2.0.0", encode: function (t) { for (var e = c(t), n = e.length, o = -1, r = ""; ++o < n;)r += u(e[o]); return r }, decode: function (t) { r = c(t), i = r.length, s = 0; for (var e, n = []; !1 !== (e = f());)n.push(e); return function (t) { for (var e, n = t.length, o = -1, r = ""; ++o < n;)65535 < (e = t[o]) && (r += a((e -= 65536) >>> 10 & 1023 | 55296), e = 56320 | 1023 & e), r += a(e); return r }(n) } }; if (e && !e.nodeType) if (n) n.exports = d; else { var g = {}.hasOwnProperty; for (var y in d) g.call(d, y) && (e[y] = d[y]) } else t.utf8 = d })(this) }).call(this, "undefined" != typeof self ? self : "undefined" != typeof window ? window : void 0 !== r ? r : {}) }, {}], 45: [function (t, e, n) { var o, r = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""), i = 64, s = {}, a = 0, c = 0; function l(t) { for (var e = ""; e = r[t % i] + e, 0 < (t = Math.floor(t / i));); return e } function h() { var t = l(+new Date); return t !== o ? (a = 0, o = t) : t + "." + l(a++) } for (; c < i; c++)s[r[c]] = c; h.encode = l, h.decode = function (t) { var e = 0; for (c = 0; c < t.length; c++)e = e * i + s[t.charAt(c)]; return e }, e.exports = h }, {}] }, {}, [1])(1) }), cc._RF.pop() }).call(this, "undefined" != typeof global ? global : "undefined" != typeof self ? self : "undefined" != typeof window ? window : {}) }, {}], uiJS: [function (t, e, n) { "use strict"; cc._RF.push(e, "0c795C7JZ1E9phfQylLRI2R", "uiJS"), cc.Class({ extends: cc.Component, properties: { Score: { default: null, type: cc.Node } }, onLoad: function () { this.global = cc.find("Canvas").getComponent("levelDataJS"), this.scoreLabel = this.Score.getComponent(cc.Label), this.scoreLabel.string = this.global.scoreLeft }, start: function () { }, update: function (t) { this.scoreLabel.string = this.global.score } }), cc._RF.pop() }, {}], worldSettingJS: [function (t, e, n) {
  "use strict"; cc._RF.push(e, "1da47gLKINPQ5pAss1AWH5x", "worldSettingJS"); var o, r = t("socket.io"), i = (o = r) && o.__esModule ? o : { default: o }; var s = t("globalData"); cc.Class({
    extends: cc.Component, properties: { network: { default: null, type: cc.Node } }, initPhysicalWorld: function () { cc.director.getPhysicsManager().enabled = !0, cc.director.getPhysicsManager().gravity = cc.v2(0, -10); var t = cc.director.getCollisionManager(); t.enabled = !0, t.enabledDebugDraw = !1, t.enabledDrawBoundingBox = !1 }, onLoad: function () {
      cc.game.addPersistRootNode(this.network), this.socket = (0, i.default)("http://207.148.86.78:3000"), s.socket = this.socket, s.socket.on("connect", function () { console.log("已连接"), 
        s.selfInfo.picture = g.globalda.userinfo.avatarUrl, s.selfInfo.name = g.globalda.userinfo.nickName
      }), s.socket.on("disconnect", function () { console.log("连接已断开") }), s.socket.on("game", function (t) {
        "gameover" === t.type ? (cc.game.end(), cc.find("Canvas/RootComponent").active = !1, cc.find("Canvas/Menu").active = !0, s.gameState = "over") : "continuegame" === t.type ? "ready" === s.gameState ? s.gameState = "begine" : s.gameState = "ready" : "quitgame" === t.type ? wx.exitMiniProgram({
          success: function (res) {  //退出游戏
            console.log("退出游戏");
          }
        }): "allPlayerJoin" === t.type ? (s.sendToServer("game", "playerinfo", { seat: s.seat, info: s.selfInfo }), s.gameState = "begine") : "playerinfo" === t.type && t.data.seat !== s.seat && (s.rivalInfo = t.data.info) }), this.initPhysicalWorld(); //背景音乐
      const innerAudioContext = wx.createInnerAudioContext();
      innerAudioContext.autoplay = true;
      innerAudioContext.loop = true
      innerAudioContext.src = 'http://1.dayong.applinzi.com/backgroundMusic.mp3';
      innerAudioContext.onPlay(() => {
        // console.log('开始播放')
      });
      innerAudioContext.onError((res) => {
        //console.log(res.errMsg)
        // console.log(res.errCode)
      });},start:function(){},update:function(t){}}),cc._RF.pop()},{globalData:"globalData","socket.io":"socket.io"}]},{},["AIBulletController","StartLevelJS","birdsJS","birdsManagerJS","bulletJS","globalData","levelDataJS","menuButtonJS","menuJS","scoreJS","socket.io","uiJS","worldSettingJS"]);